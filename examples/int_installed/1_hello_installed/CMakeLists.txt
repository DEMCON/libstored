# SPDX-FileCopyrightText: 2020-2023 Jochem Rutgers
#
# SPDX-License-Identifier: CC0-1.0

# Assume this is your project, and you don't have libstored as submodule, but use the installed
# librarie directly. This top-level cmake file shows how to do that.

cmake_minimum_required(VERSION 3.5)
project(1_hello_installed)

# This package is generated by `make install' in the repository where you have the store definition.
# In this case, we compile the 1_hello example again, which we assume to be generated and installed
# in ${CMAKE_INSTALL_PREFIX}.
find_package(LibstoredStores REQUIRED)

# Normal definition of your executable.
add_executable(1_hello_installed ${CMAKE_CURRENT_SOURCE_DIR}/../../1_hello/main.cpp)

# Now, the find_package() above defines the library we need. Just link against it.
target_link_libraries(1_hello_installed 1_hello-libstored)

# Install this new binary too.
install(TARGETS 1_hello_installed RUNTIME)

# Check out the installed binary. It should be next to 1_hello and should behave the same, but now
# without the store generator magic.

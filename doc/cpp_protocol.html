<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Protocol &mdash; libstored 1.6.1-alpha documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=664bbacb"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Synchronizer" href="cpp_synchronizer.html" />
    <link rel="prev" title="Poller" href="cpp_poller.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            libstored
          </a>
              <div class="version">
                1.6.1.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">libstored</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference external" href="https://demcon.github.io/libstored/libstored.sozi.html">Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cpp.html">C++</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cpp_config.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_debugger.html">Debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_directory.html">Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_pipes.html">Pipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_poller.html">Poller</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#stored-asciiescapelayer">stored::AsciiEscapeLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored16AsciiEscapeLayerE"><code class="docutils literal notranslate"><span class="pre">AsciiEscapeLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-bufferlayer">stored::BufferLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored11BufferLayerE"><code class="docutils literal notranslate"><span class="pre">BufferLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-callbacklayer">stored::CallbackLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4I00EN6stored13CallbackLayerE"><code class="docutils literal notranslate"><span class="pre">CallbackLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-compresslayer">stored::CompressLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored13CompressLayerE"><code class="docutils literal notranslate"><span class="pre">CompressLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-crc16layer">stored::Crc16Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored10Crc16LayerE"><code class="docutils literal notranslate"><span class="pre">Crc16Layer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-crc8layer">stored::Crc8Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored9Crc8LayerE"><code class="docutils literal notranslate"><span class="pre">Crc8Layer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-debugarqlayer">stored::DebugArqLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored13DebugArqLayerE"><code class="docutils literal notranslate"><span class="pre">DebugArqLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-debugzmqlayer">stored::DebugZmqLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored13DebugZmqLayerE"><code class="docutils literal notranslate"><span class="pre">DebugZmqLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-doublepipelayer">stored::DoublePipeLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored15DoublePipeLayerE"><code class="docutils literal notranslate"><span class="pre">DoublePipeLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-fifoloopback">stored::FifoLoopback</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE"><code class="docutils literal notranslate"><span class="pre">FifoLoopback</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-fifoloopback1">stored::FifoLoopback1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E"><code class="docutils literal notranslate"><span class="pre">FifoLoopback1</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-filelayer">stored::FileLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored9FileLayerE"><code class="docutils literal notranslate"><span class="pre">FileLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-idlechecklayer">stored::IdleCheckLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored14IdleCheckLayerE"><code class="docutils literal notranslate"><span class="pre">IdleCheckLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-loopback">stored::Loopback</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored8LoopbackE"><code class="docutils literal notranslate"><span class="pre">Loopback</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-namedpipelayer">stored::NamedPipeLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored14NamedPipeLayerE"><code class="docutils literal notranslate"><span class="pre">NamedPipeLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-printlayer">stored::PrintLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored10PrintLayerE"><code class="docutils literal notranslate"><span class="pre">PrintLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-segmentationlayer">stored::SegmentationLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored17SegmentationLayerE"><code class="docutils literal notranslate"><span class="pre">SegmentationLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-seriallayer">stored::SerialLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored11SerialLayerE"><code class="docutils literal notranslate"><span class="pre">SerialLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-stdiolayer">stored::StdioLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored10StdioLayerE"><code class="docutils literal notranslate"><span class="pre">StdioLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-synczmqlayer">stored::SyncZmqLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored12SyncZmqLayerE"><code class="docutils literal notranslate"><span class="pre">SyncZmqLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-terminallayer">stored::TerminalLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored13TerminalLayerE"><code class="docutils literal notranslate"><span class="pre">TerminalLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stored-xsimlayer">stored::XsimLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#_CPPv4N6stored9XsimLayerE"><code class="docutils literal notranslate"><span class="pre">XsimLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#abstract-classes">Abstract classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stored-arqlayer">stored::ArqLayer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stored-polledfilelayer">stored::PolledFileLayer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stored-polledlayer">stored::PolledLayer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stored-protocollayer">stored::ProtocolLayer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cpp_synchronizer.html">Synchronizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_util.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fpga.html">VHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="py.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">libstored</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="cpp.html">C++</a></li>
      <li class="breadcrumb-item active">Protocol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/doc/cpp_protocol.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="protocol">
<h1>Protocol<a class="headerlink" href="#protocol" title="Link to this heading"></a></h1>
<p>Protocol layers, to be wrapped around a <a class="reference internal" href="cpp_debugger.html#_CPPv4N6stored8DebuggerE" title="stored::Debugger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Debugger</span></code></a> or
<a class="reference internal" href="cpp_synchronizer.html#_CPPv4N6stored12SynchronizerE" title="stored::Synchronizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Synchronizer</span></code></a> instance.</p>
<p>Every embedded device is different, so the required protocol layers are too.
What is common, is the Application layer, but as the Transport and Physical
layer are often different, the layers in between are often different too.  To
provide a common Embedded Debugger interface, the client (e.g., GUI, CLI,
python scripts), we standardize on ZeroMQ REQ/REP over TCP.</p>
<p>Not every device supports ZeroMQ, or even TCP. For this, several bridges are
required. Different configurations may be possible:</p>
<ul class="simple">
<li><p>In case of a Linux/Windows application: embed ZeroMQ server into the
application, such that the application binds to a REP socket.  A client can
connect to the application directly.</p></li>
<li><p>Terminal application with only stdin/stdout: use escape sequences in the
stdin/stdout stream. <code class="docutils literal notranslate"><span class="pre">python/libstored.wrapper.stdio</span></code> is provided to
inject/extract these messages from those streams and prove a ZeroMQ
interface.</p></li>
<li><p>Application over CAN: like a <code class="docutils literal notranslate"><span class="pre">python/libstored.wrapper.stdio</span></code>, a CAN
extractor to ZeroMQ bridge is required.</p></li>
</ul>
<p>Then, the <a class="reference external" href="py.html">client</a> can be connected to the ZeroMQ interface.</p>
<p>Test it using the <code class="docutils literal notranslate"><span class="pre">terminal</span></code> example, started using the
<code class="docutils literal notranslate"><span class="pre">python/libstored.wrapper.stdio</span></code>. Then connect one of the clients to it.</p>
<p>libstored suggests to use the protocol layers below, where applicable.
Standard layer implementations can be used to construct the following stacks (top-down):</p>
<ul class="simple">
<li><p>Lossless UART:
<a class="reference internal" href="cpp_debugger.html#_CPPv4N6stored8DebuggerE" title="stored::Debugger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Debugger</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored16AsciiEscapeLayerE" title="stored::AsciiEscapeLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::AsciiEscapeLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13TerminalLayerE" title="stored::TerminalLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::TerminalLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored10StdioLayerE" title="stored::StdioLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::StdioLayer</span></code></a></p></li>
<li><p>Lossy UART:
<a class="reference internal" href="cpp_debugger.html#_CPPv4N6stored8DebuggerE" title="stored::Debugger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Debugger</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13DebugArqLayerE" title="stored::DebugArqLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::DebugArqLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored10Crc16LayerE" title="stored::Crc16Layer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Crc16Layer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored16AsciiEscapeLayerE" title="stored::AsciiEscapeLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::AsciiEscapeLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13TerminalLayerE" title="stored::TerminalLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::TerminalLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored10StdioLayerE" title="stored::StdioLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::StdioLayer</span></code></a></p></li>
<li><p>CAN:
<a class="reference internal" href="cpp_debugger.html#_CPPv4N6stored8DebuggerE" title="stored::Debugger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Debugger</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored17SegmentationLayerE" title="stored::SegmentationLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::SegmentationLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13DebugArqLayerE" title="stored::DebugArqLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::DebugArqLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored11BufferLayerE" title="stored::BufferLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::BufferLayer</span></code></a>,
CAN driver</p></li>
<li><p>ZMQ:
<a class="reference internal" href="cpp_debugger.html#_CPPv4N6stored8DebuggerE" title="stored::Debugger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Debugger</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13DebugZmqLayerE" title="stored::DebugZmqLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::DebugZmqLayer</span></code></a></p></li>
<li><p>VHDL simulation:
<a class="reference internal" href="cpp_synchronizer.html#_CPPv4N6stored12SynchronizerE" title="stored::Synchronizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::Synchronizer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored16AsciiEscapeLayerE" title="stored::AsciiEscapeLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::AsciiEscapeLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored13TerminalLayerE" title="stored::TerminalLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::TerminalLayer</span></code></a>,
<a class="reference internal" href="#_CPPv4N6stored9XsimLayerE" title="stored::XsimLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::XsimLayer</span></code></a></p></li>
</ul>
<p>If you have to implement you own protocol layer, start with
<a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">stored::ProtocolLayer</span></code></a>. Especially, override
<a class="reference internal" href="#_CPPv4N6stored13ProtocolLayer6encodeEv" title="stored::ProtocolLayer::encode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">stored::ProtocolLayer::encode()</span></code></a> for messages passed down the stack
towards the hardware, and <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayer6decodeEPv6size_t" title="stored::ProtocolLayer::decode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">stored::ProtocolLayer::decode()</span></code></a> for
messages from the hardware up.</p>
<p>The inheritance of the layers is shown below.</p>
<p class="plantuml">
<img src="../_images/plantuml-cc5f41b117e66f843321b6dffed0779cdff41b54.svg" alt="abstract ProtocolLayer
ProtocolLayer &lt;|-- AsciiEscapeLayer
ProtocolLayer &lt;|-- TerminalLayer
AsciiEscapeLayer -[hidden]--&gt; TerminalLayer
ProtocolLayer &lt;|-- SegmentationLayer
ProtocolLayer &lt;|-- Crc8Layer
ProtocolLayer &lt;|-- Crc16Layer
Crc8Layer -[hidden]--&gt; Crc16Layer
ProtocolLayer &lt;|-- BufferLayer
ProtocolLayer &lt;|-- PrintLayer
ProtocolLayer &lt;|-- IdleCheckLayer
ProtocolLayer &lt;|-- CallbackLayer

abstract ArqLayer
SegmentationLayer -[hidden]--&gt; ArqLayer
ProtocolLayer &lt;|-- ArqLayer
ArqLayer &lt;|-- DebugArqLayer

abstract PolledLayer
abstract PolledFileLayer
abstract PolledSocketLayer
ProtocolLayer &lt;|-- PolledLayer
PolledLayer &lt;|-- PolledFileLayer
PolledFileLayer &lt;|-- FileLayer
FileLayer &lt;|-- NamedPipeLayer
PolledFileLayer &lt;|-- DoublePipeLayer
DoublePipeLayer &lt;|-- XsimLayer
XsimLayer --&gt; NamedPipeLayer
PolledLayer &lt;|-- PolledSocketLayer : Windows
PolledFileLayer &lt;|-- PolledSocketLayer : POSIX
PolledFileLayer &lt;|-- StdioLayer : Windows
FileLayer &lt;|-- StdioLayer : POSIX
ProtocolLayer &lt;|-- CompressLayer
PolledLayer &lt;|-- FifoLoopback1
FileLayer &lt;|-- SerialLayer

ProtocolLayer &lt;|-- Stream
Debugger --&gt; Stream
Stream --&gt; CompressLayer
ProtocolLayer &lt;|-- Debugger
ProtocolLayer &lt;|-- SyncConnection

abstract ZmqLayer
PolledSocketLayer &lt;|-- ZmqLayer
ZmqLayer &lt;|-- DebugZmqLayer
ZmqLayer &lt;|-- SyncZmqLayer

class Loopback
FifoLoopback --&gt; FifoLoopback1"/></p>
<section id="stored-asciiescapelayer">
<h2>stored::AsciiEscapeLayer<a class="headerlink" href="#stored-asciiescapelayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayerE">
<span id="_CPPv3N6stored16AsciiEscapeLayerE"></span><span id="_CPPv2N6stored16AsciiEscapeLayerE"></span><span id="stored::AsciiEscapeLayer"></span><span class="target" id="classstored_1_1_ascii_escape_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AsciiEscapeLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Escape ASCII control characters. </p>
<p>This is required to encapsulate messages within <a class="reference internal" href="#classstored_1_1_terminal_layer"><span class="std std-ref">stored::TerminalLayer</span></a>, for example. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer4baseE">
<span id="_CPPv3N6stored16AsciiEscapeLayer4baseE"></span><span id="_CPPv2N6stored16AsciiEscapeLayer4baseE"></span><span id="stored::AsciiEscapeLayer::base"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1ad942b156ae7ac142b44f742ed5dca3a9"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer16AsciiEscapeLayerEbP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored16AsciiEscapeLayer16AsciiEscapeLayerEbP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored16AsciiEscapeLayer16AsciiEscapeLayerEbP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::AsciiEscapeLayer::AsciiEscapeLayer__b.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1ad98a4887d4b5c0d8559c0b02e4cad982"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AsciiEscapeLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">all</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer16AsciiEscapeLayerEbP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>up</strong> – the layer above, which receives our decoded frames </p></li>
<li><p><strong>down</strong> – the layer below, which receives our encoded frames </p></li>
<li><p><strong>all</strong> – when <code class="docutils literal notranslate"><span class="pre">true</span></code>, convert all control characters, instead of only those that conflict with other protocols </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayerD0Ev">
<span id="_CPPv3N6stored16AsciiEscapeLayerD0Ev"></span><span id="_CPPv2N6stored16AsciiEscapeLayerD0Ev"></span><span id="stored::AsciiEscapeLayer::~AsciiEscapeLayer"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1afa36c84c34abaaafeff11862f610860c"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~AsciiEscapeLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Destructor. </p>
<p>Ties to the layer above and below are nicely removed. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored16AsciiEscapeLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored16AsciiEscapeLayer6decodeEPv6size_t"></span><span id="stored::AsciiEscapeLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1a5acfb59ed33a8f0f3e27556421ff5245"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored16AsciiEscapeLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored16AsciiEscapeLayer6encodeEPKv6size_tb"></span><span id="stored::AsciiEscapeLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1a3db26741f80800ade6a58055dc89b5ee"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored16AsciiEscapeLayer3mtuEv">
<span id="_CPPv3NK6stored16AsciiEscapeLayer3mtuEv"></span><span id="_CPPv2NK6stored16AsciiEscapeLayer3mtuEv"></span><span id="stored::AsciiEscapeLayer::mtuC"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1ac773513d7ef5330f9fc7b46f08e79442"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored16AsciiEscapeLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer3EscE">
<span id="_CPPv3N6stored16AsciiEscapeLayer3EscE"></span><span id="_CPPv2N6stored16AsciiEscapeLayer3EscE"></span><span id="stored::AsciiEscapeLayer::Esc__cC"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1a3387a996b07c01ff22e8fadecda9277d"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Esc</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\x7f'</span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer3EscE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored16AsciiEscapeLayer7EscMaskE">
<span id="_CPPv3N6stored16AsciiEscapeLayer7EscMaskE"></span><span id="_CPPv2N6stored16AsciiEscapeLayer7EscMaskE"></span><span id="stored::AsciiEscapeLayer::EscMask__cC"></span><span class="target" id="classstored_1_1_ascii_escape_layer_1a61f7a9fd55a71c7c6c73a0ff3d73b612"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EscMask</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\x1f'</span></span><a class="headerlink" href="#_CPPv4N6stored16AsciiEscapeLayer7EscMaskE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-bufferlayer">
<h2>stored::BufferLayer<a class="headerlink" href="#stored-bufferlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayerE">
<span id="_CPPv3N6stored11BufferLayerE"></span><span id="_CPPv2N6stored11BufferLayerE"></span><span id="stored::BufferLayer"></span><span class="target" id="classstored_1_1_buffer_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BufferLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored11BufferLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Buffer partial encoding frames. </p>
<p>By default, layers pass encoded data immediately to lower layers. However, one might collect as much data as possible to reduce overhead of the actual transport. This layer buffers partial messages until the maximum buffer capacity is reached, or the <code class="docutils literal notranslate"><span class="pre">last</span></code> flag is encountered. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayer4baseE">
<span id="_CPPv3N6stored11BufferLayer4baseE"></span><span id="_CPPv2N6stored11BufferLayer4baseE"></span><span id="stored::BufferLayer::base"></span><span class="target" id="classstored_1_1_buffer_layer_1a4e4349d53f00b48357952031c61857fa"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored11BufferLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayer11BufferLayerE6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored11BufferLayer11BufferLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored11BufferLayer11BufferLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::BufferLayer::BufferLayer__s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_buffer_layer_1a37030ff4ad22eff63d818ea535362f29"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BufferLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">size</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored11BufferLayer11BufferLayerE6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor for a buffer with given size. </p>
<p>If <code class="docutils literal notranslate"><span class="pre">size</span></code> is 0, the buffer it not bounded. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayerD0Ev">
<span id="_CPPv3N6stored11BufferLayerD0Ev"></span><span id="_CPPv2N6stored11BufferLayerD0Ev"></span><span id="stored::BufferLayer::~BufferLayer"></span><span class="target" id="classstored_1_1_buffer_layer_1a25955130c9a93809ab60cac04e2e8141"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~BufferLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored11BufferLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Destructor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored11BufferLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored11BufferLayer6encodeEPKv6size_tb"></span><span id="stored::BufferLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_buffer_layer_1aa33bb526174b8ab92a7243175009140d"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored11BufferLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Collects all partial buffers, and passes the full encoded data on when <code class="docutils literal notranslate"><span class="pre">last</span></code> is set. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11BufferLayer5resetEv">
<span id="_CPPv3N6stored11BufferLayer5resetEv"></span><span id="_CPPv2N6stored11BufferLayer5resetEv"></span><span id="stored::BufferLayer::reset"></span><span class="target" id="classstored_1_1_buffer_layer_1a106b4baa477a0fac388215fc87a54fd4"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored11BufferLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-callbacklayer">
<h2>stored::CallbackLayer<a class="headerlink" href="#stored-callbacklayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I00EN6stored13CallbackLayerE">
<span id="_CPPv3I00EN6stored13CallbackLayerE"></span><span id="_CPPv2I00EN6stored13CallbackLayerE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Up</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Down</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_callback_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CallbackLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4I00EN6stored13CallbackLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Callback class that invokes a callback for every messages through the stack. </p>
<p>Use as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>auto cb = stored::make_callback(
              [&amp;](void*, size_t){ ... },
              [&amp;](void const&amp;, size_t, bool){ ... });
</pre></div>
</div>
<p>The first argument (a lambda in the example above), gets the parameters as passed to <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_callback_layer_1aa71d573905babc6ac489554eca47a5b2"><span class="std std-ref"><span class="pre">decode()</span></span></a></code>. The second argument get the parameters as passed to <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref"><span class="pre">encode()</span></span></a></code>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayer4baseE">
<span id="_CPPv3N6stored13CallbackLayer4baseE"></span><span id="_CPPv2N6stored13CallbackLayer4baseE"></span><span id="stored::CallbackLayer::base"></span><span class="target" id="classstored_1_1_callback_layer_1a4728a20c5ab209999861ffb00a7ab925"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayer13CallbackLayerERR13CallbackLayer">
<span id="_CPPv3N6stored13CallbackLayer13CallbackLayerERR13CallbackLayer"></span><span id="_CPPv2N6stored13CallbackLayer13CallbackLayerERR13CallbackLayer"></span><span id="stored::CallbackLayer::CallbackLayer__CallbackLayerRR"></span><span class="target" id="classstored_1_1_callback_layer_1ac87c47cdb066ffeaaa3ba4f9013d17ac"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CallbackLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13CallbackLayer13CallbackLayerERR13CallbackLayer" title="stored::CallbackLayer::CallbackLayer"><span class="n"><span class="pre">CallbackLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">l</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayer13CallbackLayerERR13CallbackLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayer13CallbackLayerERK13CallbackLayer">
<span id="_CPPv3N6stored13CallbackLayer13CallbackLayerERK13CallbackLayer"></span><span id="_CPPv2N6stored13CallbackLayer13CallbackLayerERK13CallbackLayer"></span><span id="stored::CallbackLayer::CallbackLayer__CallbackLayerCR"></span><span class="target" id="classstored_1_1_callback_layer_1a539a72565065b73b5a0a3a6bbace6030"></span><span class="sig-name descname"><span class="n"><span class="pre">CallbackLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13CallbackLayer13CallbackLayerERK13CallbackLayer" title="stored::CallbackLayer::CallbackLayer"><span class="n"><span class="pre">CallbackLayer</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="p"><span class="pre">&amp;</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">delete</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayer13CallbackLayerERK13CallbackLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayerD0Ev">
<span id="_CPPv3N6stored13CallbackLayerD0Ev"></span><span id="_CPPv2N6stored13CallbackLayerD0Ev"></span><span id="stored::CallbackLayer::~CallbackLayer"></span><span class="target" id="classstored_1_1_callback_layer_1a32fa60903022a928f015c6b5dc49bab3"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~CallbackLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored13CallbackLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored13CallbackLayer6decodeEPv6size_t"></span><span id="stored::CallbackLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_callback_layer_1aa71d573905babc6ac489554eca47a5b2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored13CallbackLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13CallbackLayer6encodeEPKv6size_tb"></span><span id="stored::CallbackLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_callback_layer_1aa83af71bbee0d66422f83f072ead57b5"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayeraSERR13CallbackLayer">
<span id="_CPPv3N6stored13CallbackLayeraSERR13CallbackLayer"></span><span id="_CPPv2N6stored13CallbackLayeraSERR13CallbackLayer"></span><span id="stored::CallbackLayer::assign-operator__CallbackLayerRR"></span><span class="target" id="classstored_1_1_callback_layer_1a48cc7ce64ab6af29fbee94d3c4ddf601"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I00EN6stored13CallbackLayerE" title="stored::CallbackLayer"><span class="n"><span class="pre">CallbackLayer</span></span></a><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">delete</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayeraSERR13CallbackLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CallbackLayeraSERK13CallbackLayer">
<span id="_CPPv3N6stored13CallbackLayeraSERK13CallbackLayer"></span><span id="_CPPv2N6stored13CallbackLayeraSERK13CallbackLayer"></span><span id="stored::CallbackLayer::assign-operator__CallbackLayerCR"></span><span class="target" id="classstored_1_1_callback_layer_1ac444c014d0c09a85dd697bb9fd70e149"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I00EN6stored13CallbackLayerE" title="stored::CallbackLayer"><span class="n"><span class="pre">CallbackLayer</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="p"><span class="pre">&amp;</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">delete</span></span><a class="headerlink" href="#_CPPv4N6stored13CallbackLayeraSERK13CallbackLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-compresslayer">
<h2>stored::CompressLayer<a class="headerlink" href="#stored-compresslayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerE">
<span id="_CPPv3N6stored13CompressLayerE"></span><span id="_CPPv2N6stored13CompressLayerE"></span><span id="stored::CompressLayer"></span><span class="target" id="classstored_1_1_compress_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CompressLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored13CompressLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Compress/decompress streams. </p>
<p>The compress layer uses heatshrink for compression. It is a general-purpose algorithm, which is not the best compression, and not also not the fastest, but has a limited memory usage and allows streams, which makes is appropriate for embedded systems.</p>
<p>Compression works best on longer streams, but this layer works per message. So, although it may be stacked in any protocol stack, the compression ratio may be limited. It is nicely used in stored::Stream, where it compresses a full stream (not separate messages), which are sent in chunks to the other side.</p>
<p>When heatshrink is not available, this layer is just a pass-through. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_15E">
<span id="_CPPv3N6stored13CompressLayerUt2_15E"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03ae"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_15E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_156WindowE">
<span id="_CPPv3N6stored13CompressLayerUt2_156WindowE"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03aea297dc2fc50f7c1e634c085ddec44eb26"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Window</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_156WindowE" title="Link to this definition"></a><br /></dt>
<dd><p>Window size. See heatshrink documentation. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_159LookaheadE">
<span id="_CPPv3N6stored13CompressLayerUt2_159LookaheadE"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03aea1e135e134a50ec8e4c7789b1ea3a0efc"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Lookahead</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_159LookaheadE" title="Link to this definition"></a><br /></dt>
<dd><p>Lookahead. See heatshrink documentation. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_1517DecodeInputBufferE">
<span id="_CPPv3N6stored13CompressLayerUt2_1517DecodeInputBufferE"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03aea16144ca72fbd2240454f7886f50f76f1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DecodeInputBuffer</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_1517DecodeInputBufferE" title="Link to this definition"></a><br /></dt>
<dd><p>Include buffer size in bytes. See heatshrink documentation. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_1512FlagEncodingE">
<span id="_CPPv3N6stored13CompressLayerUt2_1512FlagEncodingE"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03aea31d43198249982c2618f032f778144d7"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FlagEncoding</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_1512FlagEncodingE" title="Link to this definition"></a><br /></dt>
<dd><p>Flag for <code class="docutils literal notranslate"><span class="pre">m_state</span></code> to indicate an active encoder. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerUt2_1512FlagDecodingE">
<span id="_CPPv3N6stored13CompressLayerUt2_1512FlagDecodingE"></span><span class="target" id="classstored_1_1_compress_layer_1ab3d0e9d6951b91baf1706545f87f03aea80517e8cbf7ce9ed90d4cabab80f5b3f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FlagDecoding</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerUt2_1512FlagDecodingE" title="Link to this definition"></a><br /></dt>
<dd><p>Flag for <code class="docutils literal notranslate"><span class="pre">m_state</span></code> to indicate an active decoder. </p>
</dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayer4baseE">
<span id="_CPPv3N6stored13CompressLayer4baseE"></span><span id="_CPPv2N6stored13CompressLayer4baseE"></span><span id="stored::CompressLayer::base"></span><span class="target" id="classstored_1_1_compress_layer_1ac2b69d5be89073a897af76dcee38799e"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayer13CompressLayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13CompressLayer13CompressLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13CompressLayer13CompressLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::CompressLayer::CompressLayer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_compress_layer_1af038e4652a2a1c155d691a5d69b21d90"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CompressLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13CompressLayer13CompressLayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayerD0Ev">
<span id="_CPPv3N6stored13CompressLayerD0Ev"></span><span id="_CPPv2N6stored13CompressLayerD0Ev"></span><span id="stored::CompressLayer::~CompressLayer"></span><span class="target" id="classstored_1_1_compress_layer_1ae55c5731476b3c45520ca8218a2f86d6"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~CompressLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored13CompressLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored13CompressLayer6decodeEPv6size_t"></span><span id="stored::CompressLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_compress_layer_1a5c11e419367e8bba09588dc256275c44"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored13CompressLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13CompressLayer6encodeEPKv6size_tb"></span><span id="stored::CompressLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_compress_layer_1a39184e7a7aa33e6720ed06e9200290a5"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13CompressLayer4idleEv">
<span id="_CPPv3NK6stored13CompressLayer4idleEv"></span><span id="_CPPv2NK6stored13CompressLayer4idleEv"></span><span id="stored::CompressLayer::idleC"></span><span class="target" id="classstored_1_1_compress_layer_1abc72f42dd10ef3c3597b01dafb67128b"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">idle</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored13CompressLayer4idleEv" title="Link to this definition"></a><br /></dt>
<dd><p>Check if the encoder and decoder are both in idle state. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if there is no data stuck in any internal buffer. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13CompressLayer3mtuEv">
<span id="_CPPv3NK6stored13CompressLayer3mtuEv"></span><span id="_CPPv2NK6stored13CompressLayer3mtuEv"></span><span id="stored::CompressLayer::mtuC"></span><span class="target" id="classstored_1_1_compress_layer_1acf1acb49201308d118d98e2eb5addfab"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored13CompressLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13CompressLayer20setPurgeableResponseEb">
<span id="_CPPv3N6stored13CompressLayer20setPurgeableResponseEb"></span><span id="_CPPv2N6stored13CompressLayer20setPurgeableResponseEb"></span><span id="stored::CompressLayer::setPurgeableResponse__b"></span><span class="target" id="classstored_1_1_compress_layer_1a736a0a58b31cd381563de3ed76c2945a"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setPurgeableResponse</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">purgeable</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">final</span></span><a class="headerlink" href="#_CPPv4N6stored13CompressLayer20setPurgeableResponseEb" title="Link to this definition"></a><br /></dt>
<dd><p>Flags the current response as purgeable. </p>
<p>This may influence how a response is handled. Especially, in case of retransmits of lost packets, one may decide to either reexecute the command, or to save the first response and resend it when the command was retransmitted. In that sense, a precious response (default) means that every layer should handle the data with case, as it cannot be recovered once it is lost. When the response is flagged purgeeble, the response may be thrown away after the first try to transmit it to the client.</p>
<p>By default, all responses are precious. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-crc16layer">
<h2>stored::Crc16Layer<a class="headerlink" href="#stored-crc16layer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16LayerE">
<span id="_CPPv3N6stored10Crc16LayerE"></span><span id="_CPPv2N6stored10Crc16LayerE"></span><span id="stored::Crc16Layer"></span><span class="target" id="classstored_1_1_crc16_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Crc16Layer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored10Crc16LayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that adds a CRC-16 to messages. </p>
<p>Like <a class="reference internal" href="#classstored_1_1_crc8_layer"><span class="std std-ref">stored::Crc8Layer</span></a>, but using a 0xbaad as polynomial. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16LayerUt2_22E">
<span id="_CPPv3N6stored10Crc16LayerUt2_22E"></span><span class="target" id="classstored_1_1_crc16_layer_1a81d11ba43aae002a231f23646b3f70d5"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16LayerUt2_22E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16LayerUt2_2210polynomialE">
<span id="_CPPv3N6stored10Crc16LayerUt2_2210polynomialE"></span><span class="target" id="classstored_1_1_crc16_layer_1a81d11ba43aae002a231f23646b3f70d5aee711989700375651ca8a9c3cc313fa9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">polynomial</span></span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16LayerUt2_2210polynomialE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16LayerUt2_224initE">
<span id="_CPPv3N6stored10Crc16LayerUt2_224initE"></span><span class="target" id="classstored_1_1_crc16_layer_1a81d11ba43aae002a231f23646b3f70d5aeb8e182958fd03c1968f253e0bcb11c6"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">init</span></span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16LayerUt2_224initE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16Layer4baseE">
<span id="_CPPv3N6stored10Crc16Layer4baseE"></span><span id="_CPPv2N6stored10Crc16Layer4baseE"></span><span id="stored::Crc16Layer::base"></span><span class="target" id="classstored_1_1_crc16_layer_1ae4465a77b90af4bc3c5f8d7f9816a376"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16Layer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16Layer10Crc16LayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored10Crc16Layer10Crc16LayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored10Crc16Layer10Crc16LayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::Crc16Layer::Crc16Layer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_crc16_layer_1ac332e25fb8984cdc0c95dc2905e3cb62"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Crc16Layer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10Crc16Layer10Crc16LayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16LayerD0Ev">
<span id="_CPPv3N6stored10Crc16LayerD0Ev"></span><span id="_CPPv2N6stored10Crc16LayerD0Ev"></span><span id="stored::Crc16Layer::~Crc16Layer"></span><span class="target" id="classstored_1_1_crc16_layer_1a0b1420d3d3c69c129962c8ece9052ad3"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~Crc16Layer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16LayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16Layer6decodeEPv6size_t">
<span id="_CPPv3N6stored10Crc16Layer6decodeEPv6size_t"></span><span id="_CPPv2N6stored10Crc16Layer6decodeEPv6size_t"></span><span id="stored::Crc16Layer::decode__voidP.s"></span><span class="target" id="classstored_1_1_crc16_layer_1afc268baaaa18446a10a8ab23bf04e967"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16Layer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16Layer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored10Crc16Layer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored10Crc16Layer6encodeEPKv6size_tb"></span><span id="stored::Crc16Layer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_crc16_layer_1aaa370f1466d22991713a951f1a8e9bfd"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16Layer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10Crc16Layer3mtuEv">
<span id="_CPPv3NK6stored10Crc16Layer3mtuEv"></span><span id="_CPPv2NK6stored10Crc16Layer3mtuEv"></span><span id="stored::Crc16Layer::mtuC"></span><span class="target" id="classstored_1_1_crc16_layer_1a82d88b7503bdb383c9416e2a0cad8503"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored10Crc16Layer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10Crc16Layer5resetEv">
<span id="_CPPv3N6stored10Crc16Layer5resetEv"></span><span id="_CPPv2N6stored10Crc16Layer5resetEv"></span><span id="stored::Crc16Layer::reset"></span><span class="target" id="classstored_1_1_crc16_layer_1a00610c4aeabd33c565f5331a5aef3e01"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10Crc16Layer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-crc8layer">
<h2>stored::Crc8Layer<a class="headerlink" href="#stored-crc8layer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8LayerE">
<span id="_CPPv3N6stored9Crc8LayerE"></span><span id="_CPPv2N6stored9Crc8LayerE"></span><span id="stored::Crc8Layer"></span><span class="target" id="classstored_1_1_crc8_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Crc8Layer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored9Crc8LayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that adds a CRC-8 to messages. </p>
<p>If the CRC does not match during decoding, it is silently dropped. You probably want <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">stored::DebugArqLayer</span></a> or <a class="reference internal" href="#classstored_1_1_arq_layer"><span class="std std-ref">stored::ArqLayer</span></a> somewhere higher in the stack.</p>
<p>An 8-bit CRC is used with polynomial 0xA6. This polynomial seems to be a good choice according to <em>Cyclic Redundancy Code (CRC) Polynomial Selection For Embedded Networks</em> (Koopman et al., 2004).</p>
<p>8-bit is quite short, so it works only reliable on short messages. For proper two bit error detection, the message can be 256 bytes. For three bits, messages should only be up to 30 bytes. Use an appropriate <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a> somewhere higher in the stack to accomplish this. Consider using <a class="reference internal" href="#classstored_1_1_crc16_layer"><span class="std std-ref">stored::Crc16Layer</span></a> instead. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8LayerUt2_21E">
<span id="_CPPv3N6stored9Crc8LayerUt2_21E"></span><span class="target" id="classstored_1_1_crc8_layer_1a7c865715f0c57fcb23dad69cf49d4be3"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8LayerUt2_21E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8LayerUt2_2110polynomialE">
<span id="_CPPv3N6stored9Crc8LayerUt2_2110polynomialE"></span><span class="target" id="classstored_1_1_crc8_layer_1a7c865715f0c57fcb23dad69cf49d4be3a14adee897c9ad5499de4c6608c8f78c7"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">polynomial</span></span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8LayerUt2_2110polynomialE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8LayerUt2_214initE">
<span id="_CPPv3N6stored9Crc8LayerUt2_214initE"></span><span class="target" id="classstored_1_1_crc8_layer_1a7c865715f0c57fcb23dad69cf49d4be3a1631c674509e8d7d495cab564f1cd8eb"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">init</span></span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8LayerUt2_214initE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8Layer4baseE">
<span id="_CPPv3N6stored9Crc8Layer4baseE"></span><span id="_CPPv2N6stored9Crc8Layer4baseE"></span><span id="stored::Crc8Layer::base"></span><span class="target" id="classstored_1_1_crc8_layer_1a13eec04e6a1de27ad4c418a8eb023b3c"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8Layer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8Layer9Crc8LayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored9Crc8Layer9Crc8LayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored9Crc8Layer9Crc8LayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::Crc8Layer::Crc8Layer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_crc8_layer_1a7921554b093428c40cc19bb0c910afcc"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Crc8Layer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9Crc8Layer9Crc8LayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8LayerD0Ev">
<span id="_CPPv3N6stored9Crc8LayerD0Ev"></span><span id="_CPPv2N6stored9Crc8LayerD0Ev"></span><span id="stored::Crc8Layer::~Crc8Layer"></span><span class="target" id="classstored_1_1_crc8_layer_1a70da4defe96323a84a456fba27538c8e"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~Crc8Layer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8LayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8Layer6decodeEPv6size_t">
<span id="_CPPv3N6stored9Crc8Layer6decodeEPv6size_t"></span><span id="_CPPv2N6stored9Crc8Layer6decodeEPv6size_t"></span><span id="stored::Crc8Layer::decode__voidP.s"></span><span class="target" id="classstored_1_1_crc8_layer_1a53910dd8cb7f74db64011b5918c8c52a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8Layer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8Layer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored9Crc8Layer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored9Crc8Layer6encodeEPKv6size_tb"></span><span id="stored::Crc8Layer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_crc8_layer_1a5181019b72aefb28daee0cd8889daab2"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8Layer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored9Crc8Layer3mtuEv">
<span id="_CPPv3NK6stored9Crc8Layer3mtuEv"></span><span id="_CPPv2NK6stored9Crc8Layer3mtuEv"></span><span id="stored::Crc8Layer::mtuC"></span><span class="target" id="classstored_1_1_crc8_layer_1ac3bb509c6ebf1a8c9c98f4985ea91bde"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored9Crc8Layer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9Crc8Layer5resetEv">
<span id="_CPPv3N6stored9Crc8Layer5resetEv"></span><span id="_CPPv2N6stored9Crc8Layer5resetEv"></span><span id="stored::Crc8Layer::reset"></span><span class="target" id="classstored_1_1_crc8_layer_1af9a6cc6ac539027ee452c485611ec0ac"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9Crc8Layer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-debugarqlayer">
<h2>stored::DebugArqLayer<a class="headerlink" href="#stored-debugarqlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayerE">
<span id="_CPPv3N6stored13DebugArqLayerE"></span><span id="_CPPv2N6stored13DebugArqLayerE"></span><span id="stored::DebugArqLayer"></span><span class="target" id="classstored_1_1_debug_arq_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DebugArqLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that performs Automatic Repeat Request operations on messages for <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a>. </p>
<p>Only apply this layer on <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a>, as it assumes a REQ/REP mechanism. For a general purpose ARQ, use <a class="reference internal" href="#classstored_1_1_arq_layer"><span class="std std-ref">stored::ArqLayer</span></a>.</p>
<p>This layer allows messages that are lost, to be retransmitted on both the request and response side. The implementation assumes that lost message is possible, but rare. It optimizes on the normal case that message arrive. Retransmits may be relatively expensive.</p>
<p>Messages must be either lost or arrive correctly. Make sure to do checksumming in the layer below. Moreover, you might want the <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a> on top of this layer to make sure that packets have a deterministic (small) size.</p>
<p>Every message is prefixed with a sequence number in the range 0-0x7ffffff. Sequence numbers are normally incremented after every message. It can wrap around, but if it does, 0 should be skipped. So, the next sequence number after 0x7ffffff is 1.</p>
<p>This sequence number is encoded like VLQ (Variable-length quantity, see <a class="reference external" href="https://en.wikipedia.org/wiki/Variable-length_quantity">https://en.wikipedia.org/wiki/Variable-length_quantity</a>), with the exception that the most significant bit of the first byte is a reset flag. So, the prefix is one to four bytes.</p>
<p>A request (to be received by the target) transmits every chunk with increasing sequence number. When the target has received all messages of the request (probably determined by a <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a> on top), the request is executed and the response is sent. When everything is OK, the next request can be sent, continuing with the sequence number. There should be no gap in these numbers.</p>
<p>The client can decide to reset the sequence numbers. To do this, send a message with only the new sequence number that the client will use from now on, but with the reset flag set. There is no payload. The target will respond with a message containing 0x80 (and no further payload). This can be used to recover the connection if the client lost track of the sequence numbers (e.g., it restarted). After this reset operation, the next request shall use the sequence number used to reset + 1. The response will start with sequence number 1.</p>
<p>Individual messages are not ACKed, like TCP does. If the client does not receive a response to its request, either the request or the response has been lost. In any case, it has to resend its full request, using the same sequence numbers as used with the first attempt. The target will (re)send its response. There is no timeout specified. Use a timeout value that fits the infrastructure of your device. There is no limit in how often a retransmit can occur.</p>
<p>The application has limited buffering. So, neither the request nor the full response may be buffered for (partial) retransmission. Therefore, it may be the case that when the response was lost, the request is reexecuted. It is up to the buffer size as specified in <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">DebugArqLayer</span></a>’s constructor and <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a> to determine when it is safe or required to reexected upon every retransmit. For example, writes are not reexecuted, as a write may have unexpected side-effects, while it is safe to reexecute a read of a normal variable. When the directory is requested, the response is often too long to buffer, and the response is constant, so it is not buffered either and just reexecuted. Note that if the buffer is too small, reading from a stream (s command) will do a destructive read, but this data may be lost if the response is lost. Configure the stream size and <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">DebugArqLayer</span></a>’s buffer appropriate if that is unacceptable for you.</p>
<p>Because of this limited buffering, the response may reset the sequence numbers more often. Upon retransmission of the same data, the same sequence numbers are used, just like the retransmission of the request. However, if the data may have been changed, as the response was not buffered and the request was reexecuted, the reset flag is set of the first response message, while it has a new sequence number. The client should accept this new sequence number and discard all previously collected response messages.</p>
<p>Within one request or response, the same sequence number should be used twice; even if the request or response is very long. Worst-case, when there is only one payload byte per message, this limits the request and response to 128 MB. As the payload is allowed to be of any size, this should not be a real limitation in practice.</p>
<p>This protocol is verified by the Promela model in tests/DebugArqLayer.pml. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer4baseE">
<span id="_CPPv3N6stored13DebugArqLayer4baseE"></span><span id="_CPPv2N6stored13DebugArqLayer4baseE"></span><span id="stored::DebugArqLayer::base"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a76eb5880b8905b436890d5c3672a6f64"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer13DebugArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13DebugArqLayer13DebugArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13DebugArqLayer13DebugArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::DebugArqLayer::DebugArqLayer__s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a3b233392e7f1d2094789656d5c7f672d"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DebugArqLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">maxEncodeBuffer</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer13DebugArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayerD0Ev">
<span id="_CPPv3N6stored13DebugArqLayerD0Ev"></span><span id="_CPPv2N6stored13DebugArqLayerD0Ev"></span><span id="stored::DebugArqLayer::~DebugArqLayer"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a3e1fa759205732459521e6ebf3043849"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~DebugArqLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored13DebugArqLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored13DebugArqLayer6decodeEPv6size_t"></span><span id="stored::DebugArqLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a2dc5a377d6c5f636cd0e3cf4343ddea4"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored13DebugArqLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13DebugArqLayer6encodeEPKv6size_tb"></span><span id="stored::DebugArqLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_debug_arq_layer_1af737904b1c5650a91dd00b7e21176d05"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13DebugArqLayer3mtuEv">
<span id="_CPPv3NK6stored13DebugArqLayer3mtuEv"></span><span id="_CPPv2NK6stored13DebugArqLayer3mtuEv"></span><span id="stored::DebugArqLayer::mtuC"></span><span class="target" id="classstored_1_1_debug_arq_layer_1adb2ab020fb7e6aeca00c97be9545ced7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored13DebugArqLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer5resetEv">
<span id="_CPPv3N6stored13DebugArqLayer5resetEv"></span><span id="_CPPv2N6stored13DebugArqLayer5resetEv"></span><span id="stored::DebugArqLayer::reset"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a6b16bc8ebeb3d6e2bc3fa2fd42a82998"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer20setPurgeableResponseEb">
<span id="_CPPv3N6stored13DebugArqLayer20setPurgeableResponseEb"></span><span id="_CPPv2N6stored13DebugArqLayer20setPurgeableResponseEb"></span><span id="stored::DebugArqLayer::setPurgeableResponse__b"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a036abba40a16df72e93b9fd9a9251bbb"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setPurgeableResponse</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">purgeable</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer20setPurgeableResponseEb" title="Link to this definition"></a><br /></dt>
<dd><p>Flags the current response as purgeable. </p>
<p>This may influence how a response is handled. Especially, in case of retransmits of lost packets, one may decide to either reexecute the command, or to save the first response and resend it when the command was retransmitted. In that sense, a precious response (default) means that every layer should handle the data with case, as it cannot be recovered once it is lost. When the response is flagged purgeeble, the response may be thrown away after the first try to transmit it to the client.</p>
<p>By default, all responses are precious. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugArqLayer9ResetFlagE">
<span id="_CPPv3N6stored13DebugArqLayer9ResetFlagE"></span><span id="_CPPv2N6stored13DebugArqLayer9ResetFlagE"></span><span id="stored::DebugArqLayer::ResetFlag__uint8_tC"></span><span class="target" id="classstored_1_1_debug_arq_layer_1a87a309300610933db0afa522a0ae517a"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ResetFlag</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0x80</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugArqLayer9ResetFlagE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-debugzmqlayer">
<h2>stored::DebugZmqLayer<a class="headerlink" href="#stored-debugzmqlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayerE">
<span id="_CPPv3N6stored13DebugZmqLayerE"></span><span id="_CPPv2N6stored13DebugZmqLayerE"></span><span id="stored::DebugZmqLayer"></span><span class="target" id="classstored_1_1_debug_zmq_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DebugZmqLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ZmqLayer</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Constructs a protocol stack on top of a REQ/REP ZeroMQ socket, specifically for the <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayerUt2_37E">
<span id="_CPPv3N6stored13DebugZmqLayerUt2_37E"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1ae5ae98e9db5eb4d3e7d98d4c7d71fcb2"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayerUt2_37E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayerUt2_3711DefaultPortE">
<span id="_CPPv3N6stored13DebugZmqLayerUt2_3711DefaultPortE"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1ae5ae98e9db5eb4d3e7d98d4c7d71fcb2a6e3be45d44a117e2006d26f9adef4611"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DefaultPort</span></span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayerUt2_3711DefaultPortE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayer4baseE">
<span id="_CPPv3N6stored13DebugZmqLayer4baseE"></span><span id="_CPPv2N6stored13DebugZmqLayer4baseE"></span><span id="stored::DebugZmqLayer::base"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1a9197cae99539f25370afcb076ca410f0"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">ZmqLayer</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayer13DebugZmqLayerEPviP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13DebugZmqLayer13DebugZmqLayerEPviP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13DebugZmqLayer13DebugZmqLayerEPviP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::DebugZmqLayer::DebugZmqLayer__voidP.i.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1a53d99c8a2bf36828686aec34b9175999"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DebugZmqLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">context</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">port</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13DebugZmqLayerUt2_3711DefaultPortE" title="stored::DebugZmqLayer::[anonymous]::DefaultPort"><span class="n"><span class="pre">DefaultPort</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayer13DebugZmqLayerEPviP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor. </p>
<p>The given <code class="docutils literal notranslate"><span class="pre">port</span></code> used for a REQ/REP socket over TCP. This is the listening side, where a client like the <code class="docutils literal notranslate"><span class="pre">libstored.gui</span></code> can connect to.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayerD0Ev">
<span id="_CPPv3N6stored13DebugZmqLayerD0Ev"></span><span id="_CPPv2N6stored13DebugZmqLayerD0Ev"></span><span id="stored::DebugZmqLayer::~DebugZmqLayer"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1a794242ade3ab69336a5a4f55a2bb925c"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~DebugZmqLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13DebugZmqLayer4recvEl">
<span id="_CPPv3N6stored13DebugZmqLayer4recvEl"></span><span id="_CPPv2N6stored13DebugZmqLayer4recvEl"></span><span id="stored::DebugZmqLayer::recv__l"></span><span class="target" id="classstored_1_1_debug_zmq_layer_1a5bf4a78f80f8dfb760c45402c4378636"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13DebugZmqLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive all available data from the ZeroMQ REP socket, and <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a> it. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout_us</strong> – if zero, this function does not block. -1 blocks indefinitely. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-doublepipelayer">
<h2>stored::DoublePipeLayer<a class="headerlink" href="#stored-doublepipelayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayerE">
<span id="_CPPv3N6stored15DoublePipeLayerE"></span><span id="_CPPv2N6stored15DoublePipeLayerE"></span><span id="stored::DoublePipeLayer"></span><span class="target" id="classstored_1_1_double_pipe_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DoublePipeLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Server end of a pair of named pipes. </p>
<p>This is like <a class="reference internal" href="#classstored_1_1_named_pipe_layer"><span class="std std-ref">NamedPipeLayer</span></a>, but it uses to unidirectional pipes instead of one bidirectional. </p>
<p>Subclassed by <a class="reference internal" href="#classstored_1_1_xsim_layer"><span class="std std-ref">stored::XsimLayer</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer4baseE">
<span id="_CPPv3N6stored15DoublePipeLayer4baseE"></span><span id="_CPPv2N6stored15DoublePipeLayer4baseE"></span><span id="stored::DoublePipeLayer::base"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a138faeb95ee08e709b4d305bfecf83ae"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer15DoublePipeLayerEPKcPKcP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored15DoublePipeLayer15DoublePipeLayerEPKcPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored15DoublePipeLayer15DoublePipeLayerEPKcPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::DoublePipeLayer::DoublePipeLayer__cCP.cCP.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a797e265ab372d9728f6107b0bbaace7d"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DoublePipeLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name_r</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name_w</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer15DoublePipeLayerEPKcPKcP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayerD0Ev">
<span id="_CPPv3N6stored15DoublePipeLayerD0Ev"></span><span id="_CPPv2N6stored15DoublePipeLayerD0Ev"></span><span id="stored::DoublePipeLayer::~DoublePipeLayer"></span><span class="target" id="classstored_1_1_double_pipe_layer_1acd724571a0c515cfa3045f839232e272"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~DoublePipeLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored15DoublePipeLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored15DoublePipeLayer6encodeEPKv6size_tb"></span><span id="stored::DoublePipeLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a75b46c15630b953848e3fcbf8e15cf3d"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored15DoublePipeLayer2fdEv">
<span id="_CPPv3NK6stored15DoublePipeLayer2fdEv"></span><span id="_CPPv2NK6stored15DoublePipeLayer2fdEv"></span><span id="stored::DoublePipeLayer::fdC"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a231755678ffd06a3eadc3830cdbf19bd"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">fd_type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored15DoublePipeLayer2fdEv" title="Link to this definition"></a><br /></dt>
<dd><p>The file descriptor you may poll before calling <a class="reference internal" href="#classstored_1_1_double_pipe_layer_1a4d8673812dd68a23ae00a0e98c003a21"><span class="std std-ref">recv()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored15DoublePipeLayer11isConnectedEv">
<span id="_CPPv3NK6stored15DoublePipeLayer11isConnectedEv"></span><span id="_CPPv2NK6stored15DoublePipeLayer11isConnectedEv"></span><span id="stored::DoublePipeLayer::isConnectedC"></span><span class="target" id="classstored_1_1_double_pipe_layer_1ac3e6c74b4305ef78a327979967238aa3"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isConnected</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored15DoublePipeLayer11isConnectedEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if both pipes are connected. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored15DoublePipeLayer6isOpenEv">
<span id="_CPPv3NK6stored15DoublePipeLayer6isOpenEv"></span><span id="_CPPv2NK6stored15DoublePipeLayer6isOpenEv"></span><span id="stored::DoublePipeLayer::isOpenC"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a24a2e4cc5b6505c269238b4ef4685e01"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isOpen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored15DoublePipeLayer6isOpenEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if the file descriptor is open. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer4recvEl">
<span id="_CPPv3N6stored15DoublePipeLayer4recvEl"></span><span id="_CPPv2N6stored15DoublePipeLayer4recvEl"></span><span id="stored::DoublePipeLayer::recv__l"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a4d8673812dd68a23ae00a0e98c003a21"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive and decode data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>0 on success, otherwise an <code class="docutils literal notranslate"><span class="pre">errno</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer6reopenEv">
<span id="_CPPv3N6stored15DoublePipeLayer6reopenEv"></span><span id="_CPPv2N6stored15DoublePipeLayer6reopenEv"></span><span id="stored::DoublePipeLayer::reopen"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a4c7547ed1a5d24bc653dfbc0b3057975"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reopen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer6reopenEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15DoublePipeLayer5resetEv">
<span id="_CPPv3N6stored15DoublePipeLayer5resetEv"></span><span id="_CPPv2N6stored15DoublePipeLayer5resetEv"></span><span id="stored::DoublePipeLayer::reset"></span><span class="target" id="classstored_1_1_double_pipe_layer_1a3ca328f92c084f2f2705893f635f0d63"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored15DoublePipeLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-fifoloopback">
<h2>stored::FifoLoopback<a class="headerlink" href="#stored-fifoloopback" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE">
<span id="_CPPv3I_6size_t_6size_tEN6stored12FifoLoopbackE"></span><span id="_CPPv2I_6size_t_6size_tEN6stored12FifoLoopbackE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Capacity</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Messages</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">impl</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">defaultMessages</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE" title="stored::FifoLoopback::Capacity"><span class="n"><span class="pre">Capacity</span></span></a><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_fifo_loopback"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback</span></span></span><a class="headerlink" href="#_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE" title="Link to this definition"></a><br /></dt>
<dd><p>Bidirectional loopback for two protocol stacks with thread-safe FIFOs. </p>
<p>The loopback has an <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> side, which are symmetrical. Both sides can be used to connect to a <a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_synchronizer"><span class="std std-ref">stored::Synchronizer</span></a>, for example. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback18FifoLoopback1_typeE">
<span id="_CPPv3N6stored12FifoLoopback18FifoLoopback1_typeE"></span><span id="_CPPv2N6stored12FifoLoopback18FifoLoopback1_typeE"></span><span class="target" id="classstored_1_1_fifo_loopback_1adff329d8d93a6e442e8359665bae1d9f"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback1_type</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E" title="stored::FifoLoopback1"><span class="n"><span class="pre">FifoLoopback1</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE" title="stored::FifoLoopback::Capacity"><span class="n"><span class="pre">Capacity</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored12FifoLoopbackE" title="stored::FifoLoopback::Messages"><span class="n"><span class="pre">Messages</span></span></a><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback18FifoLoopback1_typeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback12FifoLoopbackEv">
<span id="_CPPv3N6stored12FifoLoopback12FifoLoopbackEv"></span><span id="_CPPv2N6stored12FifoLoopback12FifoLoopbackEv"></span><span id="stored::FifoLoopback::FifoLoopback"></span><span class="target" id="classstored_1_1_fifo_loopback_1aa1af98a997a3d438aa603624d388be4e"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback12FifoLoopbackEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback12FifoLoopbackER13ProtocolLayerR13ProtocolLayer">
<span id="_CPPv3N6stored12FifoLoopback12FifoLoopbackER13ProtocolLayerR13ProtocolLayer"></span><span id="_CPPv2N6stored12FifoLoopback12FifoLoopbackER13ProtocolLayerR13ProtocolLayer"></span><span id="stored::FifoLoopback::FifoLoopback__ProtocolLayerR.ProtocolLayerR"></span><span class="target" id="classstored_1_1_fifo_loopback_1a0da488fb4a7b3b3c9d1b678f843d4424"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">a</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">b</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback12FifoLoopbackER13ProtocolLayerR13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopbackD0Ev">
<span id="_CPPv3N6stored12FifoLoopbackD0Ev"></span><span id="_CPPv2N6stored12FifoLoopbackD0Ev"></span><span id="stored::FifoLoopback::~FifoLoopback"></span><span class="target" id="classstored_1_1_fifo_loopback_1a26c10a69cd03c9a18aee12e85a2c49d8"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~FifoLoopback</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopbackD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback1aEv">
<span id="_CPPv3N6stored12FifoLoopback1aEv"></span><span id="_CPPv2N6stored12FifoLoopback1aEv"></span><span id="stored::FifoLoopback::a"></span><span class="target" id="classstored_1_1_fifo_loopback_1a623dcc1e5625b9c88cfaacf755fbd3dc"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">a</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback1aEv" title="Link to this definition"></a><br /></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">a</span></code> endpoint. </p>
<p>Use this layer to register in a <a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_synchronizer"><span class="std std-ref">stored::Synchronizer</span></a>, for example, or to wrap another stack. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback3a2bEv">
<span id="_CPPv3N6stored12FifoLoopback3a2bEv"></span><span id="_CPPv2N6stored12FifoLoopback3a2bEv"></span><span id="stored::FifoLoopback::a2b"></span><span class="target" id="classstored_1_1_fifo_loopback_1aef47c6309a91147d2e7beb7f5b690a84"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored12FifoLoopback18FifoLoopback1_typeE" title="stored::FifoLoopback::FifoLoopback1_type"><span class="n"><span class="pre">FifoLoopback1_type</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">a2b</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback3a2bEv" title="Link to this definition"></a><br /></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">a</span></code> to <code class="docutils literal notranslate"><span class="pre">b</span></code> FIFO. </p>
<p>Use this FIFO to call <code class="docutils literal notranslate"><span class="pre">recv()</span></code> on at the <code class="docutils literal notranslate"><span class="pre">b</span></code> side of the loopback. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback1bEv">
<span id="_CPPv3N6stored12FifoLoopback1bEv"></span><span id="_CPPv2N6stored12FifoLoopback1bEv"></span><span id="stored::FifoLoopback::b"></span><span class="target" id="classstored_1_1_fifo_loopback_1adab2ab7b89d351988ea72cdd669894ed"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">b</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback1bEv" title="Link to this definition"></a><br /></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">b</span></code> endpoint. </p>
<p>Use this layer to register in a <a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_synchronizer"><span class="std std-ref">stored::Synchronizer</span></a>, for example, or to wrap another stack. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12FifoLoopback3b2aEv">
<span id="_CPPv3N6stored12FifoLoopback3b2aEv"></span><span id="_CPPv2N6stored12FifoLoopback3b2aEv"></span><span id="stored::FifoLoopback::b2a"></span><span class="target" id="classstored_1_1_fifo_loopback_1a71bf855131c771f4971020b3977792fe"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored12FifoLoopback18FifoLoopback1_typeE" title="stored::FifoLoopback::FifoLoopback1_type"><span class="n"><span class="pre">FifoLoopback1_type</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">b2a</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12FifoLoopback3b2aEv" title="Link to this definition"></a><br /></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">b</span></code> to <code class="docutils literal notranslate"><span class="pre">a</span></code> FIFO. </p>
<p>Use this FIFO to call <code class="docutils literal notranslate"><span class="pre">recv()</span></code> on at the <code class="docutils literal notranslate"><span class="pre">a</span></code> side of the loopback. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-fifoloopback1">
<h2>stored::FifoLoopback1<a class="headerlink" href="#stored-fifoloopback1" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E">
<span id="_CPPv3I_6size_t_6size_tEN6stored13FifoLoopback1E"></span><span id="_CPPv2I_6size_t_6size_tEN6stored13FifoLoopback1E"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Capacity</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Messages</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">impl</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">defaultMessages</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E" title="stored::FifoLoopback1::Capacity"><span class="n"><span class="pre">Capacity</span></span></a><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_fifo_loopback1"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback1</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored11PolledLayerE" title="stored::PolledLayer"><span class="n"><span class="pre">PolledLayer</span></span></a><a class="headerlink" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E" title="Link to this definition"></a><br /></dt>
<dd><p>A <a class="reference internal" href="#classstored_1_1_protocol_layer"><span class="std std-ref">ProtocolLayer</span></a> that buffers downstream messages. </p>
<p>To get the messages from the fifo, call <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1a04612b1f4c3e1a3165859b296746312a"><span class="std std-ref">recv()</span></a>. If there are any, the are passed upstream. Blocking on a <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1a04612b1f4c3e1a3165859b296746312a"><span class="std std-ref">recv()</span></a> is not supported; always use 0 as timeout (no waiting).</p>
<p>This fifo is thread-safe by default. Only <a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref">encode()</span></a> messages from one context, and only <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1a04612b1f4c3e1a3165859b296746312a"><span class="std std-ref">recv()</span></a> (and therefore <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a>) from another context. Do not mix or have multiple encoding/decoding contexts. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback14baseE">
<span id="_CPPv3N6stored13FifoLoopback14baseE"></span><span id="_CPPv2N6stored13FifoLoopback14baseE"></span><span id="stored::FifoLoopback1::base"></span><span class="target" id="classstored_1_1_fifo_loopback1_1af2f0937737080208fd35ebba12201b4e"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored11PolledLayerE" title="stored::PolledLayer"><span class="n"><span class="pre">PolledLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback14baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback19Fifo_typeE">
<span id="_CPPv3N6stored13FifoLoopback19Fifo_typeE"></span><span id="_CPPv2N6stored13FifoLoopback19Fifo_typeE"></span><span id="stored::FifoLoopback1::Fifo_type"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a0c9b31861f8ad8ff7b4f3e63f8022b78"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="cpp_util.html#_CPPv4I_6size_t_6size_t_bEN6stored11MessageFifoE" title="stored::MessageFifo"><span class="n"><span class="pre">MessageFifo</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E" title="stored::FifoLoopback1::Capacity"><span class="n"><span class="pre">Capacity</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_6size_t_6size_tEN6stored13FifoLoopback1E" title="stored::FifoLoopback1::Messages"><span class="n"><span class="pre">Messages</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Fifo_type</span></span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback19Fifo_typeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback116OverflowCallbackE">
<span id="_CPPv3N6stored13FifoLoopback116OverflowCallbackE"></span><span id="_CPPv2N6stored13FifoLoopback116OverflowCallbackE"></span><span class="target" id="classstored_1_1_fifo_loopback1_1aa7c09521aeca8d3ab78450ce38b1f5a7"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">OverflowCallback</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback116OverflowCallbackE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback113FifoLoopback1EP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13FifoLoopback113FifoLoopback1EP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13FifoLoopback113FifoLoopback1EP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::FifoLoopback1::FifoLoopback1__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a2033ed12d5bf950eed36b63507c52d7b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FifoLoopback1</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback113FifoLoopback1EP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback1D0Ev">
<span id="_CPPv3N6stored13FifoLoopback1D0Ev"></span><span id="_CPPv2N6stored13FifoLoopback1D0Ev"></span><span id="stored::FifoLoopback1::~FifoLoopback1"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a261f3d51290483ac37978ad8a0ef6276"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~FifoLoopback1</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback1D0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback19availableEv">
<span id="_CPPv3NK6stored13FifoLoopback19availableEv"></span><span id="_CPPv2NK6stored13FifoLoopback19availableEv"></span><span id="stored::FifoLoopback1::availableC"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a66f11cd7f909284c2d8030a2d125a037"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">available</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback19availableEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback17boundedEv">
<span id="_CPPv3NK6stored13FifoLoopback17boundedEv"></span><span id="_CPPv2NK6stored13FifoLoopback17boundedEv"></span><span id="stored::FifoLoopback1::boundedCCE"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a186b4df20867df33d7a2b55339f07187"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bounded</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback17boundedEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback15emptyEv">
<span id="_CPPv3NK6stored13FifoLoopback15emptyEv"></span><span id="_CPPv2NK6stored13FifoLoopback15emptyEv"></span><span id="stored::FifoLoopback1::emptyC"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a296e3d075f398ad5c5ab8ab1d1b0611b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">empty</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback15emptyEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback16encodeEPKv6size_tb">
<span id="_CPPv3N6stored13FifoLoopback16encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13FifoLoopback16encodeEPKv6size_tb"></span><span id="stored::FifoLoopback1::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a3358c2ab3871538995610c474166b854"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback16encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required.</p>
<p>When the FIFO is full and new messages are dropped, the <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1ab6ab82116881de5dc3eb6c9260ab1d6c"><span class="std std-ref">overflow()</span></a> is invoked. As long as it returns <code class="docutils literal notranslate"><span class="pre">true</span></code>, the FIFO push is retried.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#classstored_1_1_fifo_loopback1_1ac47f03a2f805e53dadcd2b19c4ecde98"><span class="std std-ref">setOverflowHandler()</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback14fullEv">
<span id="_CPPv3NK6stored13FifoLoopback14fullEv"></span><span id="_CPPv2NK6stored13FifoLoopback14fullEv"></span><span id="stored::FifoLoopback1::fullC"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a97960fb31d084f0c096125de2da53d74"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">full</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback14fullEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback13mtuEv">
<span id="_CPPv3NK6stored13FifoLoopback13mtuEv"></span><span id="_CPPv2NK6stored13FifoLoopback13mtuEv"></span><span id="stored::FifoLoopback1::mtuC"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a8212d5a95b0c770a240463bd8b595c9f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback13mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback18overflowEv">
<span id="_CPPv3N6stored13FifoLoopback18overflowEv"></span><span id="_CPPv2N6stored13FifoLoopback18overflowEv"></span><span id="stored::FifoLoopback1::overflow"></span><span class="target" id="classstored_1_1_fifo_loopback1_1ab6ab82116881de5dc3eb6c9260ab1d6c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">overflow</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback18overflowEv" title="Link to this definition"></a><br /></dt>
<dd><p>Invoke overflow handler. </p>
<p>If no callback is set, <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a> is set to <code class="docutils literal notranslate"><span class="pre">ENOMEM</span></code>, and <code class="docutils literal notranslate"><span class="pre">false</span></code> is returned. This flag is only reset by <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1abab48eaa4ab02b0fab6489aca3000ddc"><span class="std std-ref">reset()</span></a>.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#classstored_1_1_fifo_loopback1_1ac47f03a2f805e53dadcd2b19c4ecde98"><span class="std std-ref">setOverflowHandler()</span></a></p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if the overflow situation might be resolved, <code class="docutils literal notranslate"><span class="pre">false</span></code> when no other fifo push is to be attempted and the data is to be dropped.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback14recvEl">
<span id="_CPPv3N6stored13FifoLoopback14recvEl"></span><span id="_CPPv2N6stored13FifoLoopback14recvEl"></span><span id="stored::FifoLoopback1::recv__l"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a04612b1f4c3e1a3165859b296746312a"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback14recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Pass at most one message in the FIFO to <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a>. </p>
<p><code class="docutils literal notranslate"><span class="pre">timeout_us</span></code> is here for compatibility with the <a class="reference internal" href="#classstored_1_1_protocol_layer"><span class="std std-ref">ProtocolLayer</span></a> interface, but must be 0. Actual blocking is not supported.</p>
<p>The return value is either 0 on success or <code class="docutils literal notranslate"><span class="pre">EAGAIN</span></code> in case the FIFO is empty. This value is not saved in <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a>, as that field is only used by <a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref">encode()</span></a> and is not thread-safe. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback17recvAllEv">
<span id="_CPPv3N6stored13FifoLoopback17recvAllEv"></span><span id="_CPPv2N6stored13FifoLoopback17recvAllEv"></span><span id="stored::FifoLoopback1::recvAll"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a4e81182caa5eb78c5ca7b40076e52acb"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recvAll</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback17recvAllEv" title="Link to this definition"></a><br /></dt>
<dd><p>Pass all available messages in the FIFO to <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13FifoLoopback15resetEv">
<span id="_CPPv3N6stored13FifoLoopback15resetEv"></span><span id="_CPPv2N6stored13FifoLoopback15resetEv"></span><span id="stored::FifoLoopback1::reset"></span><span class="target" id="classstored_1_1_fifo_loopback1_1abab48eaa4ab02b0fab6489aca3000ddc"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13FifoLoopback15resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerEvRR1F">
<span id="_CPPv3I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerERR1F"></span><span id="_CPPv2I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerERR1F"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">nullptr_t</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">SFINAE_IS_FUNCTION</span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerEvRR1F" title="stored::FifoLoopback1::setOverflowHandler::F"><span class="n"><span class="pre">F</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13FifoLoopback116OverflowCallbackE" title="stored::FifoLoopback1::OverflowCallback"><span class="n"><span class="pre">OverflowCallback</span></span></a>, <span class="kt"><span class="pre">int</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_fifo_loopback1_1ac47f03a2f805e53dadcd2b19c4ecde98"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setOverflowHandler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerEvRR1F" title="stored::FifoLoopback1::setOverflowHandler::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">cb</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F16OverflowCallbackiEEN6stored13FifoLoopback118setOverflowHandlerEvRR1F" title="Link to this definition"></a><br /></dt>
<dd><p>Set the handler to be called by <a class="reference internal" href="#classstored_1_1_fifo_loopback1_1ab6ab82116881de5dc3eb6c9260ab1d6c"><span class="std std-ref">overflow()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback14sizeEv">
<span id="_CPPv3NK6stored13FifoLoopback14sizeEv"></span><span id="_CPPv2NK6stored13FifoLoopback14sizeEv"></span><span id="stored::FifoLoopback1::sizeCCE"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a8fb5d15d2c42608f0d165ff88084f061"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback14sizeEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13FifoLoopback15spaceEv">
<span id="_CPPv3NK6stored13FifoLoopback15spaceEv"></span><span id="_CPPv2NK6stored13FifoLoopback15spaceEv"></span><span id="stored::FifoLoopback1::spaceC"></span><span class="target" id="classstored_1_1_fifo_loopback1_1a2b22625a82433eb7416c7050593895e2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">space</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK6stored13FifoLoopback15spaceEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-filelayer">
<h2>stored::FileLayer<a class="headerlink" href="#stored-filelayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayerE">
<span id="_CPPv3N6stored9FileLayerE"></span><span id="_CPPv2N6stored9FileLayerE"></span><span id="stored::FileLayer"></span><span class="target" id="classstored_1_1_file_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FileLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored9FileLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that reads from and writes to file descriptors. </p>
<p>For POSIX, this applies to everything that is a file descriptor. <code class="docutils literal notranslate"><span class="pre">read()</span></code> and <code class="docutils literal notranslate"><span class="pre">write()</span></code> is done non-blocking, by using a <a class="reference internal" href="cpp_poller.html#classstored_1_1_poller"><span class="std std-ref">stored::Poller</span></a>.</p>
<p>For Windows, this can only be used for files. See <a class="reference internal" href="#classstored_1_1_named_pipe_layer"><span class="std std-ref">stored::NamedPipeLayer</span></a>. All files reads and writes use overlapped IO, in combination with a <a class="reference internal" href="cpp_poller.html#classstored_1_1_poller"><span class="std std-ref">stored::Poller</span></a>. The file handle must be opened that way. The implementation always has an overlapped read pending, and checks the corresponding event for completion. Every <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref"><span class="pre">decode()</span></span></a></code> triggers an overlapped write. It uses a completion routine, so the thread must be put in an alertable state once in a while (which the <a class="reference internal" href="cpp_poller.html#classstored_1_1_poller"><span class="std std-ref">stored::Poller</span></a> does when blocking). </p>
<p>Subclassed by <a class="reference internal" href="#classstored_1_1_named_pipe_layer"><span class="std std-ref">stored::NamedPipeLayer</span></a>, <a class="reference internal" href="#classstored_1_1_serial_layer"><span class="std std-ref">stored::SerialLayer</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayerUt2_24E">
<span id="_CPPv3N6stored9FileLayerUt2_24E"></span><span class="target" id="classstored_1_1_file_layer_1a7570aeebd92161b5b1e20472188d2634"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayerUt2_24E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayerUt2_2417DefaultBufferSizeE">
<span id="_CPPv3N6stored9FileLayerUt2_2417DefaultBufferSizeE"></span><span class="target" id="classstored_1_1_file_layer_1a7570aeebd92161b5b1e20472188d2634acf99299bb7f36b81c8f12deb56c85301"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DefaultBufferSize</span></span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayerUt2_2417DefaultBufferSizeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayer4baseE">
<span id="_CPPv3N6stored9FileLayer4baseE"></span><span id="_CPPv2N6stored9FileLayer4baseE"></span><span id="stored::FileLayer::base"></span><span class="target" id="classstored_1_1_file_layer_1ab526cd871079672e8749692d3c935126"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayer9FileLayerEPKcPKc6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored9FileLayer9FileLayerEPKcPKc6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored9FileLayer9FileLayerEPKcPKc6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::FileLayer::FileLayer__cCP.cCP.s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_file_layer_1a8d97e5310bd3770f4ade9af0b08948ff"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FileLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name_r</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name_w</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">bufferSize</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored9FileLayerUt2_2417DefaultBufferSizeE" title="stored::FileLayer::[anonymous]::DefaultBufferSize"><span class="n"><span class="pre">DefaultBufferSize</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9FileLayer9FileLayerEPKcPKc6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor for two files to be opened. </p>
<p>If <code class="docutils literal notranslate"><span class="pre">name_w</span></code> is <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, <code class="docutils literal notranslate"><span class="pre">name_r</span></code> is used to write to as well. Files are created when required. If the file exists, writing will append data to the file (it is not truncated).</p>
<p>Do not use this ctor when inheriting this class.</p>
<p>It sets <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a> appropriately. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayer9FileLayerEii6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored9FileLayer9FileLayerEii6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored9FileLayer9FileLayerEii6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::FileLayer::FileLayer__i.i.s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_file_layer_1af0988d5e71c6e665b5f68b80550d0c84"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FileLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">fd_r</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">fd_w</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="o"><span class="pre">-</span></span><span class="m"><span class="pre">1</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">bufferSize</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored9FileLayerUt2_2417DefaultBufferSizeE" title="stored::FileLayer::[anonymous]::DefaultBufferSize"><span class="n"><span class="pre">DefaultBufferSize</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9FileLayer9FileLayerEii6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor for two already opened file descriptors. </p>
<p>If <code class="docutils literal notranslate"><span class="pre">fd_w</span></code> is -1, <code class="docutils literal notranslate"><span class="pre">fd_r</span></code> is used to write to as well.</p>
<p>Do not use this ctor when inheriting this class.</p>
<p>It sets <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a> appropriately. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayerD0Ev">
<span id="_CPPv3N6stored9FileLayerD0Ev"></span><span id="_CPPv2N6stored9FileLayerD0Ev"></span><span id="stored::FileLayer::~FileLayer"></span><span class="target" id="classstored_1_1_file_layer_1addb5cf9fb3707fa3da6dbf092faa0d82"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~FileLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
<p>It calls close_(), not close() as the latter is virtual. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored9FileLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored9FileLayer6encodeEPKv6size_tb"></span><span id="stored::FileLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_file_layer_1aa0d6e70fc9ba1a40c1436b055dbdc1e9"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required.</p>
<p>Sets <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a> appropriately. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored9FileLayer2fdEv">
<span id="_CPPv3NK6stored9FileLayer2fdEv"></span><span id="_CPPv2NK6stored9FileLayer2fdEv"></span><span id="stored::FileLayer::fdC"></span><span class="target" id="classstored_1_1_file_layer_1a58badaa958c01f0f22eaf298788148e8"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">fd_type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored9FileLayer2fdEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the file descriptor to be used by a <a class="reference internal" href="cpp_poller.html#classstored_1_1_poller"><span class="std std-ref">stored::Poller</span></a> in order to call <a class="reference internal" href="#classstored_1_1_file_layer_1a1383d4291a2835c5015bdc2dd4dd53c7"><span class="std std-ref">recv()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored9FileLayer6isOpenEv">
<span id="_CPPv3NK6stored9FileLayer6isOpenEv"></span><span id="_CPPv2NK6stored9FileLayer6isOpenEv"></span><span id="stored::FileLayer::isOpenC"></span><span class="target" id="classstored_1_1_file_layer_1a653122ce5a77c5d5999008337bce58b7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isOpen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored9FileLayer6isOpenEv" title="Link to this definition"></a><br /></dt>
<dd><p>Check if the file descriptors are open. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9FileLayer4recvEl">
<span id="_CPPv3N6stored9FileLayer4recvEl"></span><span id="_CPPv2N6stored9FileLayer4recvEl"></span><span id="stored::FileLayer::recv__l"></span><span class="target" id="classstored_1_1_file_layer_1a1383d4291a2835c5015bdc2dd4dd53c7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9FileLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive data from the file descriptor and forward it for decoding. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout_us</strong> – if zero, this function does not block. -1 blocks indefinitely. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, otherwise an errno </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-idlechecklayer">
<h2>stored::IdleCheckLayer<a class="headerlink" href="#stored-idlechecklayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayerE">
<span id="_CPPv3N6stored14IdleCheckLayerE"></span><span id="_CPPv2N6stored14IdleCheckLayerE"></span><span id="stored::IdleCheckLayer"></span><span class="target" id="classstored_1_1_idle_check_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IdleCheckLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that tracks if it sees communication through the stack. </p>
<p>This may be used to check of long inactivity on stalled or disconnected communication channels. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayer4baseE">
<span id="_CPPv3N6stored14IdleCheckLayer4baseE"></span><span id="_CPPv2N6stored14IdleCheckLayer4baseE"></span><span id="stored::IdleCheckLayer::base"></span><span class="target" id="classstored_1_1_idle_check_layer_1a8ade350c2e54d6e18058cdbaa8c99083"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayer14IdleCheckLayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored14IdleCheckLayer14IdleCheckLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored14IdleCheckLayer14IdleCheckLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::IdleCheckLayer::IdleCheckLayer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_idle_check_layer_1a70e64a474cec05f84e23e00053c358d7"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IdleCheckLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayer14IdleCheckLayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayerD0Ev">
<span id="_CPPv3N6stored14IdleCheckLayerD0Ev"></span><span id="_CPPv2N6stored14IdleCheckLayerD0Ev"></span><span id="stored::IdleCheckLayer::~IdleCheckLayer"></span><span class="target" id="classstored_1_1_idle_check_layer_1a4d10db2c218770ff20c7ec5ed1ef8ff8"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~IdleCheckLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored14IdleCheckLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored14IdleCheckLayer6decodeEPv6size_t"></span><span id="stored::IdleCheckLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_idle_check_layer_1a1a2993ff32baf1c41503aefe1a6fa11b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored14IdleCheckLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored14IdleCheckLayer6encodeEPKv6size_tb"></span><span id="stored::IdleCheckLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_idle_check_layer_1ab9c593f0d0a25a61347a117af7464378"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14IdleCheckLayer4idleEv">
<span id="_CPPv3NK6stored14IdleCheckLayer4idleEv"></span><span id="_CPPv2NK6stored14IdleCheckLayer4idleEv"></span><span id="stored::IdleCheckLayer::idleC"></span><span class="target" id="classstored_1_1_idle_check_layer_1ad319cecaaa2c4d6fd655e11c2fb9cc68"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">idle</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14IdleCheckLayer4idleEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if both up and down the stack was idle since the last call to <a class="reference internal" href="#classstored_1_1_idle_check_layer_1a8694bfbef0d447afe68f633e2e492d0a"><span class="std std-ref">setIdle()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14IdleCheckLayer8idleDownEv">
<span id="_CPPv3NK6stored14IdleCheckLayer8idleDownEv"></span><span id="_CPPv2NK6stored14IdleCheckLayer8idleDownEv"></span><span id="stored::IdleCheckLayer::idleDownC"></span><span class="target" id="classstored_1_1_idle_check_layer_1a4b58ecd9abe1812ac27fae792f0d14a9"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">idleDown</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14IdleCheckLayer8idleDownEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if downstream was idle since the last call to <a class="reference internal" href="#classstored_1_1_idle_check_layer_1a8694bfbef0d447afe68f633e2e492d0a"><span class="std std-ref">setIdle()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14IdleCheckLayer6idleUpEv">
<span id="_CPPv3NK6stored14IdleCheckLayer6idleUpEv"></span><span id="_CPPv2NK6stored14IdleCheckLayer6idleUpEv"></span><span id="stored::IdleCheckLayer::idleUpC"></span><span class="target" id="classstored_1_1_idle_check_layer_1aab4d31887cf8b6e2641cb2d870b302b3"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">idleUp</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14IdleCheckLayer6idleUpEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if upstream was idle since the last call to <a class="reference internal" href="#classstored_1_1_idle_check_layer_1a8694bfbef0d447afe68f633e2e492d0a"><span class="std std-ref">setIdle()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14IdleCheckLayer7setIdleEv">
<span id="_CPPv3N6stored14IdleCheckLayer7setIdleEv"></span><span id="_CPPv2N6stored14IdleCheckLayer7setIdleEv"></span><span id="stored::IdleCheckLayer::setIdle"></span><span class="target" id="classstored_1_1_idle_check_layer_1a8694bfbef0d447afe68f633e2e492d0a"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setIdle</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored14IdleCheckLayer7setIdleEv" title="Link to this definition"></a><br /></dt>
<dd><p>Resets idle flags. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-loopback">
<h2>stored::Loopback<a class="headerlink" href="#stored-loopback" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8LoopbackE">
<span id="_CPPv3N6stored8LoopbackE"></span><span id="_CPPv2N6stored8LoopbackE"></span><span id="stored::Loopback"></span><span class="target" id="classstored_1_1_loopback"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Loopback</span></span></span><a class="headerlink" href="#_CPPv4N6stored8LoopbackE" title="Link to this definition"></a><br /></dt>
<dd><p><a class="reference internal" href="#classstored_1_1_loopback"><span class="std std-ref">Loopback</span></a> between two protocol stacks. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8Loopback8LoopbackER13ProtocolLayerR13ProtocolLayer">
<span id="_CPPv3N6stored8Loopback8LoopbackER13ProtocolLayerR13ProtocolLayer"></span><span id="_CPPv2N6stored8Loopback8LoopbackER13ProtocolLayerR13ProtocolLayer"></span><span id="stored::Loopback::Loopback__ProtocolLayerR.ProtocolLayerR"></span><span class="target" id="classstored_1_1_loopback_1ae239087665db4aeee2b4ac4d88769688"></span><span class="sig-name descname"><span class="n"><span class="pre">Loopback</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">a</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">b</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8Loopback8LoopbackER13ProtocolLayerR13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructs a bidirectional loopback of stacks <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8LoopbackD0Ev">
<span id="_CPPv3N6stored8LoopbackD0Ev"></span><span id="_CPPv2N6stored8LoopbackD0Ev"></span><span id="stored::Loopback::~Loopback"></span><span class="target" id="classstored_1_1_loopback_1aa9bfaf1e9a97b090ee03af253bb3a2c7"></span><span class="sig-name descname"><span class="n"><span class="pre">~Loopback</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored8LoopbackD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8Loopback7reserveE6size_t">
<span id="_CPPv3N6stored8Loopback7reserveE6size_t"></span><span id="_CPPv2N6stored8Loopback7reserveE6size_t"></span><span id="stored::Loopback::reserve__s"></span><span class="target" id="classstored_1_1_loopback_1a71314148bad48549b9d4ec5abcdaf4e6"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reserve</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">capacity</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8Loopback7reserveE6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Reserve heap memory to assemble partial messages. </p>
<p>The capacity is allocated twice; one for both directions. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-namedpipelayer">
<h2>stored::NamedPipeLayer<a class="headerlink" href="#stored-namedpipelayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayerE">
<span id="_CPPv3N6stored14NamedPipeLayerE"></span><span id="_CPPv2N6stored14NamedPipeLayerE"></span><span id="stored::NamedPipeLayer"></span><span class="target" id="classstored_1_1_named_pipe_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NamedPipeLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored9FileLayerE" title="stored::FileLayer"><span class="n"><span class="pre">FileLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Server end of a named pipe. </p>
<p>This is only for Windows. Just use a FileLayer with <code class="docutils literal notranslate"><span class="pre">pipe()</span></code> for POSIX.</p>
<p>The client end is easier; it is just a file-like create/open/write/close API. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayerUt2_25E">
<span id="_CPPv3N6stored14NamedPipeLayerUt2_25E"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a8b5874edc1a68fe18bd3ccd9affb4ed7"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayerUt2_25E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayerUt2_2510BufferSizeE">
<span id="_CPPv3N6stored14NamedPipeLayerUt2_2510BufferSizeE"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a8b5874edc1a68fe18bd3ccd9affb4ed7a95b2f2194c488d701e80c07be6165338"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BufferSize</span></span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayerUt2_2510BufferSizeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayer4baseE">
<span id="_CPPv3N6stored14NamedPipeLayer4baseE"></span><span id="_CPPv2N6stored14NamedPipeLayer4baseE"></span><span id="stored::NamedPipeLayer::base"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a98a10251f612b2a31d042761306f9cd7"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored9FileLayerE" title="stored::FileLayer"><span class="n"><span class="pre">FileLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayer14NamedPipeLayerEPKc5DWORDP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored14NamedPipeLayer14NamedPipeLayerEPKc5DWORDP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored14NamedPipeLayer14NamedPipeLayerEPKc5DWORDP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::NamedPipeLayer::NamedPipeLayer__cCP.DWORD.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_named_pipe_layer_1af68a15eed3a59c643125ad9590a9a0cd"></span><span class="sig-name descname"><span class="n"><span class="pre">NamedPipeLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name</span></span>, <span class="n"><span class="pre">DWORD</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">openMode</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">PIPE_ACCESS_DUPLEX</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayer14NamedPipeLayerEPKc5DWORDP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor for the server part of a named pipe. </p>
<p>The given name is prefixed with <code class="docutils literal notranslate"><span class="pre">\\</span></code>.\pipe. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayerD0Ev">
<span id="_CPPv3N6stored14NamedPipeLayerD0Ev"></span><span id="_CPPv2N6stored14NamedPipeLayerD0Ev"></span><span id="stored::NamedPipeLayer::~NamedPipeLayer"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a15537a86387862e9ae19682c377290bd"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~NamedPipeLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored14NamedPipeLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored14NamedPipeLayer6encodeEPKv6size_tb"></span><span id="stored::NamedPipeLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_named_pipe_layer_1ac01a029021edbb2db24e6ed8340922d2"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required.</p>
<p>Sets <a class="reference internal" href="#classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"><span class="std std-ref">lastError()</span></a> appropriately. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14NamedPipeLayer6handleEv">
<span id="_CPPv3NK6stored14NamedPipeLayer6handleEv"></span><span id="_CPPv2NK6stored14NamedPipeLayer6handleEv"></span><span id="stored::NamedPipeLayer::handleC"></span><span class="target" id="classstored_1_1_named_pipe_layer_1abec74661f339eae9491a9ba158eb874b"></span><span class="n"><span class="pre">HANDLE</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handle</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14NamedPipeLayer6handleEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the pipe handle. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14NamedPipeLayer11isConnectedEv">
<span id="_CPPv3NK6stored14NamedPipeLayer11isConnectedEv"></span><span id="_CPPv2NK6stored14NamedPipeLayer11isConnectedEv"></span><span id="stored::NamedPipeLayer::isConnectedC"></span><span class="target" id="classstored_1_1_named_pipe_layer_1aa829cfd7589c7418c2b9813eaa6ae418"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isConnected</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14NamedPipeLayer11isConnectedEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if the pipe is connected. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored14NamedPipeLayer4nameEv">
<span id="_CPPv3NK6stored14NamedPipeLayer4nameEv"></span><span id="_CPPv2NK6stored14NamedPipeLayer4nameEv"></span><span id="stored::NamedPipeLayer::nameC"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a3c4ad8f93733640f776af5059711042d"></span><span class="n"><span class="pre">String</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">type</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored14NamedPipeLayer4nameEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the full name of the pipe. </p>
<p>This name can be used to open it elsewhere as a normal file. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayer4recvEl">
<span id="_CPPv3N6stored14NamedPipeLayer4recvEl"></span><span id="_CPPv2N6stored14NamedPipeLayer4recvEl"></span><span id="stored::NamedPipeLayer::recv__l"></span><span class="target" id="classstored_1_1_named_pipe_layer_1adf4280b91f407b0fcb33787ac1598cd2"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">final</span></span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive data from the file descriptor and forward it for decoding. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout_us</strong> – if zero, this function does not block. -1 blocks indefinitely. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, otherwise an errno </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored14NamedPipeLayer6reopenEv">
<span id="_CPPv3N6stored14NamedPipeLayer6reopenEv"></span><span id="_CPPv2N6stored14NamedPipeLayer6reopenEv"></span><span id="stored::NamedPipeLayer::reopen"></span><span class="target" id="classstored_1_1_named_pipe_layer_1a58e33036bb335aa2926800ac2aa51e77"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reopen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored14NamedPipeLayer6reopenEv" title="Link to this definition"></a><br /></dt>
<dd><p>Resets the connection to accept a new incoming one. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-printlayer">
<h2>stored::PrintLayer<a class="headerlink" href="#stored-printlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayerE">
<span id="_CPPv3N6stored10PrintLayerE"></span><span id="_CPPv2N6stored10PrintLayerE"></span><span id="stored::PrintLayer"></span><span class="target" id="classstored_1_1_print_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PrintLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored10PrintLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Prints all messages to a <code class="docutils literal notranslate"><span class="pre">FILE</span></code>. </p>
<p>Messages are printed on a line. Decoded message start with &lt;, encoded messages with &gt;, partial encoded messages with *.</p>
<p>Printing can be suspended and resumed by calling <a class="reference internal" href="#classstored_1_1_print_layer_1a98b9e612d86dcf4e91586116a3fd455f"><span class="std std-ref">enable()</span></a> or <a class="reference internal" href="#classstored_1_1_print_layer_1a834e57e92165befbb917b8ac4007fcad"><span class="std std-ref">disable()</span></a>. The default state is enabled.</p>
<p>Mainly for debugging purposes. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer4baseE">
<span id="_CPPv3N6stored10PrintLayer4baseE"></span><span id="_CPPv2N6stored10PrintLayer4baseE"></span><span id="stored::PrintLayer::base"></span><span class="target" id="classstored_1_1_print_layer_1a1b035a7a19360fd18357e08c651a4cdc"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer10PrintLayerEP4FILEPKcP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored10PrintLayer10PrintLayerEP4FILEPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored10PrintLayer10PrintLayerEP4FILEPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::PrintLayer::PrintLayer__FILEP.cCP.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_print_layer_1a7ed0289ba08ea88ce711354ffef603a6"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PrintLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">f</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">stdout</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer10PrintLayerEP4FILEPKcP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor to print all decoding/encoding messages to the given <code class="docutils literal notranslate"><span class="pre">FILE</span></code>. </p>
<p>If <code class="docutils literal notranslate"><span class="pre">f</span></code> is <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, printing is suppressed. The name is used as prefix of the printed messages.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#classstored_1_1_print_layer_1aea312a1d43697789e614a761927288f9"><span class="std std-ref">setFile()</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayerD0Ev">
<span id="_CPPv3N6stored10PrintLayerD0Ev"></span><span id="_CPPv2N6stored10PrintLayerD0Ev"></span><span id="stored::PrintLayer::~PrintLayer"></span><span class="target" id="classstored_1_1_print_layer_1aeada8ebb9ae4a3f72c9a2944112ee564"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~PrintLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored10PrintLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored10PrintLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored10PrintLayer6decodeEPv6size_t"></span><span id="stored::PrintLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_print_layer_1af92198162e84a80d70afbd76143df369"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer7disableEv">
<span id="_CPPv3N6stored10PrintLayer7disableEv"></span><span id="_CPPv2N6stored10PrintLayer7disableEv"></span><span id="stored::PrintLayer::disable"></span><span class="target" id="classstored_1_1_print_layer_1a834e57e92165befbb917b8ac4007fcad"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disable</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer7disableEv" title="Link to this definition"></a><br /></dt>
<dd><p>Disable printing all messages. </p>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">enable(false)</span></code>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer6enableEb">
<span id="_CPPv3N6stored10PrintLayer6enableEb"></span><span id="_CPPv2N6stored10PrintLayer6enableEb"></span><span id="stored::PrintLayer::enable__b"></span><span class="target" id="classstored_1_1_print_layer_1a98b9e612d86dcf4e91586116a3fd455f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enable</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">enable</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer6enableEb" title="Link to this definition"></a><br /></dt>
<dd><p>Enable printing all messages. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10PrintLayer7enabledEv">
<span id="_CPPv3NK6stored10PrintLayer7enabledEv"></span><span id="_CPPv2NK6stored10PrintLayer7enabledEv"></span><span id="stored::PrintLayer::enabledC"></span><span class="target" id="classstored_1_1_print_layer_1a4c70cb3b648c5e716df2713d7b2c0238"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enabled</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored10PrintLayer7enabledEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns if printing is currently enabled. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored10PrintLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored10PrintLayer6encodeEPKv6size_tb"></span><span id="stored::PrintLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_print_layer_1a226eb9431e9d6a646fb120258d30717d"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10PrintLayer4fileEv">
<span id="_CPPv3NK6stored10PrintLayer4fileEv"></span><span id="_CPPv2NK6stored10PrintLayer4fileEv"></span><span id="stored::PrintLayer::fileC"></span><span class="target" id="classstored_1_1_print_layer_1a8bf3c1f8af6e073c506f53c6c6c8e848"></span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">file</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored10PrintLayer4fileEv" title="Link to this definition"></a><br /></dt>
<dd><p>Return the <code class="docutils literal notranslate"><span class="pre">FILE</span></code> that is written to. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10PrintLayer7setFileEP4FILE">
<span id="_CPPv3N6stored10PrintLayer7setFileEP4FILE"></span><span id="_CPPv2N6stored10PrintLayer7setFileEP4FILE"></span><span id="stored::PrintLayer::setFile__FILEP"></span><span class="target" id="classstored_1_1_print_layer_1aea312a1d43697789e614a761927288f9"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setFile</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">f</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10PrintLayer7setFileEP4FILE" title="Link to this definition"></a><br /></dt>
<dd><p>Set the <code class="docutils literal notranslate"><span class="pre">FILE</span></code> to write to. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> – the <code class="docutils literal notranslate"><span class="pre">FILE</span></code>, set to <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> to disable output </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-segmentationlayer">
<h2>stored::SegmentationLayer<a class="headerlink" href="#stored-segmentationlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayerE">
<span id="_CPPv3N6stored17SegmentationLayerE"></span><span id="_CPPv2N6stored17SegmentationLayerE"></span><span id="stored::SegmentationLayer"></span><span class="target" id="classstored_1_1_segmentation_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SegmentationLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A layer that performs segmentation of the messages. </p>
<p>Messages to be encoded are split with a maximum chunk size (MTU). At the end of each chunk, either <a class="reference internal" href="#classstored_1_1_segmentation_layer_1a36b6e6bf8545558a5e1c95c9a3bbcd27"><span class="std std-ref">ContinueMarker</span></a> or the <a class="reference internal" href="#classstored_1_1_segmentation_layer_1a85ac4ba426a9e49f2f8c1d14785bcc24"><span class="std std-ref">EndMarker</span></a> is inserted, depending of this was the last chunk. Incoming messages are reassembled until the <a class="reference internal" href="#classstored_1_1_segmentation_layer_1a85ac4ba426a9e49f2f8c1d14785bcc24"><span class="std std-ref">EndMarker</span></a> is encountered.</p>
<p>This layer assumes a lossless channel; all messages are received in order. If that is not the case for your transport, wrap this layer in the <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">stored::DebugArqLayer</span></a> or <a class="reference internal" href="#classstored_1_1_arq_layer"><span class="std std-ref">stored::ArqLayer</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer4baseE">
<span id="_CPPv3N6stored17SegmentationLayer4baseE"></span><span id="_CPPv2N6stored17SegmentationLayer4baseE"></span><span id="stored::SegmentationLayer::base"></span><span class="target" id="classstored_1_1_segmentation_layer_1a3843bb7c02a848cf6f2f427731572edd"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer17SegmentationLayerE6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored17SegmentationLayer17SegmentationLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored17SegmentationLayer17SegmentationLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::SegmentationLayer::SegmentationLayer__s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_segmentation_layer_1a792bbe3ab3e8c859078e654fbff856ab"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SegmentationLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mtu</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer17SegmentationLayerE6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayerD0Ev">
<span id="_CPPv3N6stored17SegmentationLayerD0Ev"></span><span id="_CPPv2N6stored17SegmentationLayerD0Ev"></span><span id="stored::SegmentationLayer::~SegmentationLayer"></span><span class="target" id="classstored_1_1_segmentation_layer_1ac169d87edf16d2ddf16a7c4573829649"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~SegmentationLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored17SegmentationLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored17SegmentationLayer6decodeEPv6size_t"></span><span id="stored::SegmentationLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_segmentation_layer_1adee6ee8d098ff67655b36c1ab269d490"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored17SegmentationLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored17SegmentationLayer6encodeEPKv6size_tb"></span><span id="stored::SegmentationLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_segmentation_layer_1a07d8192a0db41389735cb012fc231ba0"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored17SegmentationLayer8lowerMtuEv">
<span id="_CPPv3NK6stored17SegmentationLayer8lowerMtuEv"></span><span id="_CPPv2NK6stored17SegmentationLayer8lowerMtuEv"></span><span id="stored::SegmentationLayer::lowerMtuC"></span><span class="target" id="classstored_1_1_segmentation_layer_1a67b205f77f8a2517e16db48cc052ea27"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">lowerMtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored17SegmentationLayer8lowerMtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the MTU used to split messages into. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored17SegmentationLayer3mtuEv">
<span id="_CPPv3NK6stored17SegmentationLayer3mtuEv"></span><span id="_CPPv2NK6stored17SegmentationLayer3mtuEv"></span><span id="stored::SegmentationLayer::mtuC"></span><span class="target" id="classstored_1_1_segmentation_layer_1a5cd64512cd57378cf25bd2890266919a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">final</span></span><a class="headerlink" href="#_CPPv4NK6stored17SegmentationLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer5resetEv">
<span id="_CPPv3N6stored17SegmentationLayer5resetEv"></span><span id="_CPPv2N6stored17SegmentationLayer5resetEv"></span><span id="stored::SegmentationLayer::reset"></span><span class="target" id="classstored_1_1_segmentation_layer_1a3d4b430c6dab20da295fb67dacf5451a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer14ContinueMarkerE">
<span id="_CPPv3N6stored17SegmentationLayer14ContinueMarkerE"></span><span id="_CPPv2N6stored17SegmentationLayer14ContinueMarkerE"></span><span id="stored::SegmentationLayer::ContinueMarker__cC"></span><span class="target" id="classstored_1_1_segmentation_layer_1a36b6e6bf8545558a5e1c95c9a3bbcd27"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ContinueMarker</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'C'</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer14ContinueMarkerE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored17SegmentationLayer9EndMarkerE">
<span id="_CPPv3N6stored17SegmentationLayer9EndMarkerE"></span><span id="_CPPv2N6stored17SegmentationLayer9EndMarkerE"></span><span id="stored::SegmentationLayer::EndMarker__cC"></span><span class="target" id="classstored_1_1_segmentation_layer_1a85ac4ba426a9e49f2f8c1d14785bcc24"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EndMarker</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'E'</span></span><a class="headerlink" href="#_CPPv4N6stored17SegmentationLayer9EndMarkerE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-seriallayer">
<h2>stored::SerialLayer<a class="headerlink" href="#stored-seriallayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayerE">
<span id="_CPPv3N6stored11SerialLayerE"></span><span id="_CPPv2N6stored11SerialLayerE"></span><span id="stored::SerialLayer"></span><span class="target" id="classstored_1_1_serial_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SerialLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored9FileLayerE" title="stored::FileLayer"><span class="n"><span class="pre">FileLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored11SerialLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A serial port layer. </p>
<p>This is just a <a class="reference internal" href="#classstored_1_1_file_layer"><span class="std std-ref">FileLayer</span></a>, but initializes the serial port communication parameters during construction. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayerUt2_27E">
<span id="_CPPv3N6stored11SerialLayerUt2_27E"></span><span class="target" id="classstored_1_1_serial_layer_1a56d34000b12aae159be83afe4201d03f"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored11SerialLayerUt2_27E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayerUt2_2710BufferSizeE">
<span id="_CPPv3N6stored11SerialLayerUt2_2710BufferSizeE"></span><span class="target" id="classstored_1_1_serial_layer_1a56d34000b12aae159be83afe4201d03fa341472fa8687d9e1a8e08406fcbf8265"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BufferSize</span></span></span><a class="headerlink" href="#_CPPv4N6stored11SerialLayerUt2_2710BufferSizeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayer4baseE">
<span id="_CPPv3N6stored11SerialLayer4baseE"></span><span id="_CPPv2N6stored11SerialLayer4baseE"></span><span id="stored::SerialLayer::base"></span><span class="target" id="classstored_1_1_serial_layer_1a287d26ca8e63bdb45b6591c491229a40"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored9FileLayerE" title="stored::FileLayer"><span class="n"><span class="pre">FileLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored11SerialLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayer11SerialLayerEPKcmbbP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored11SerialLayer11SerialLayerEPKcmbbP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored11SerialLayer11SerialLayerEPKcmbbP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::SerialLayer::SerialLayer__cCP.unsigned-l.b.b.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_serial_layer_1abb291695690f265ba72e2736ec7ab6cb"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SerialLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">name</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">baud</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">rtscts</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">xonxoff</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored11SerialLayer11SerialLayerEPKcmbbP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayerD0Ev">
<span id="_CPPv3N6stored11SerialLayerD0Ev"></span><span id="_CPPv2N6stored11SerialLayerD0Ev"></span><span id="stored::SerialLayer::~SerialLayer"></span><span class="target" id="classstored_1_1_serial_layer_1ae276e74f6b47c1d01ebb823a75767f54"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~SerialLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored11SerialLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11SerialLayer13resetAutoBaudEv">
<span id="_CPPv3N6stored11SerialLayer13resetAutoBaudEv"></span><span id="_CPPv2N6stored11SerialLayer13resetAutoBaudEv"></span><span id="stored::SerialLayer::resetAutoBaud"></span><span class="target" id="classstored_1_1_serial_layer_1a4853d923232e5223f715fed8ddf7764b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">resetAutoBaud</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored11SerialLayer13resetAutoBaudEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-stdiolayer">
<h2>stored::StdioLayer<a class="headerlink" href="#stored-stdiolayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayerE">
<span id="_CPPv3N6stored10StdioLayerE"></span><span id="_CPPv2N6stored10StdioLayerE"></span><span id="stored::StdioLayer"></span><span class="target" id="classstored_1_1_stdio_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">StdioLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored10StdioLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A stdin/stdout layer. </p>
<p>Although a Console HANDLE can be read/written as a normal file in Windows, it does not support polling or overlapped IO. Moreover, if stdin/stdout are redirected, the Console becomes a Named Pipe HANDLE. This class handles both.</p>
<p>For POSIX, the <a class="reference internal" href="#classstored_1_1_stdio_layer"><span class="std std-ref">StdioLayer</span></a> is just a <a class="reference internal" href="#classstored_1_1_file_layer"><span class="std std-ref">FileLayer</span></a> with preset stdin/stdout file descriptors. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayerUt2_26E">
<span id="_CPPv3N6stored10StdioLayerUt2_26E"></span><span class="target" id="classstored_1_1_stdio_layer_1a6788c1bc24070d8d796b40354379b805"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayerUt2_26E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayerUt2_2617DefaultBufferSizeE">
<span id="_CPPv3N6stored10StdioLayerUt2_2617DefaultBufferSizeE"></span><span class="target" id="classstored_1_1_stdio_layer_1a6788c1bc24070d8d796b40354379b805af93c50653d79f9c4e54459e624d3e8e1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DefaultBufferSize</span></span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayerUt2_2617DefaultBufferSizeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayer4baseE">
<span id="_CPPv3N6stored10StdioLayer4baseE"></span><span id="_CPPv2N6stored10StdioLayer4baseE"></span><span id="stored::StdioLayer::base"></span><span class="target" id="classstored_1_1_stdio_layer_1aa2f98a9945ef11be4161ebc13c7eca1b"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayerE" title="stored::PolledFileLayer"><span class="n"><span class="pre">PolledFileLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayer10StdioLayerE6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored10StdioLayer10StdioLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored10StdioLayer10StdioLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::StdioLayer::StdioLayer__s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_stdio_layer_1ab2d0fca98e64a959c23d299e1cac7bc7"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">StdioLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">bufferSize</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored10StdioLayerUt2_2617DefaultBufferSizeE" title="stored::StdioLayer::[anonymous]::DefaultBufferSize"><span class="n"><span class="pre">DefaultBufferSize</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored10StdioLayer10StdioLayerE6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayerD0Ev">
<span id="_CPPv3N6stored10StdioLayerD0Ev"></span><span id="_CPPv2N6stored10StdioLayerD0Ev"></span><span id="stored::StdioLayer::~StdioLayer"></span><span class="target" id="classstored_1_1_stdio_layer_1a9f8a35915c3d0ae87b3f19de23944e20"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~StdioLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored10StdioLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored10StdioLayer6encodeEPKv6size_tb"></span><span id="stored::StdioLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_stdio_layer_1aebb04aa932c5bec1add272fe35f8f3e5"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10StdioLayer2fdEv">
<span id="_CPPv3NK6stored10StdioLayer2fdEv"></span><span id="_CPPv2NK6stored10StdioLayer2fdEv"></span><span id="stored::StdioLayer::fdC"></span><span class="target" id="classstored_1_1_stdio_layer_1a56051e8a14208cd012c7b9d8163539ea"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">fd_type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored10StdioLayer2fdEv" title="Link to this definition"></a><br /></dt>
<dd><p>The file descriptor you may poll before calling <a class="reference internal" href="#classstored_1_1_stdio_layer_1a1265212568866ed1c6b8fb748bd47bcb"><span class="std std-ref">recv()</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10StdioLayer6isOpenEv">
<span id="_CPPv3NK6stored10StdioLayer6isOpenEv"></span><span id="_CPPv2NK6stored10StdioLayer6isOpenEv"></span><span id="stored::StdioLayer::isOpenC"></span><span class="target" id="classstored_1_1_stdio_layer_1a12c8644c3dcb0cffd48f95e264b9198a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isOpen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored10StdioLayer6isOpenEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if the file descriptor is open. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10StdioLayer8isPipeInEv">
<span id="_CPPv3NK6stored10StdioLayer8isPipeInEv"></span><span id="_CPPv2NK6stored10StdioLayer8isPipeInEv"></span><span id="stored::StdioLayer::isPipeInC"></span><span class="target" id="classstored_1_1_stdio_layer_1a9df892c4c0194f0c7be7b7cd81c6f81b"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isPipeIn</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored10StdioLayer8isPipeInEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored10StdioLayer9isPipeOutEv">
<span id="_CPPv3NK6stored10StdioLayer9isPipeOutEv"></span><span id="_CPPv2NK6stored10StdioLayer9isPipeOutEv"></span><span id="stored::StdioLayer::isPipeOutC"></span><span class="target" id="classstored_1_1_stdio_layer_1a0abd608e1b5bad5b74041a762e88525c"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isPipeOut</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored10StdioLayer9isPipeOutEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored10StdioLayer4recvEl">
<span id="_CPPv3N6stored10StdioLayer4recvEl"></span><span id="_CPPv2N6stored10StdioLayer4recvEl"></span><span id="stored::StdioLayer::recv__l"></span><span class="target" id="classstored_1_1_stdio_layer_1a1265212568866ed1c6b8fb748bd47bcb"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored10StdioLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive and decode data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>0 on success, otherwise an <code class="docutils literal notranslate"><span class="pre">errno</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-synczmqlayer">
<h2>stored::SyncZmqLayer<a class="headerlink" href="#stored-synczmqlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12SyncZmqLayerE">
<span id="_CPPv3N6stored12SyncZmqLayerE"></span><span id="_CPPv2N6stored12SyncZmqLayerE"></span><span id="stored::SyncZmqLayer"></span><span class="target" id="classstored_1_1_sync_zmq_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SyncZmqLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">ZmqLayer</span></span><a class="headerlink" href="#_CPPv4N6stored12SyncZmqLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Constructs a protocol stack on top of a PAIR ZeroMQ socket, specifically for the <a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_synchronizer"><span class="std std-ref">stored::Synchronizer</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12SyncZmqLayer4baseE">
<span id="_CPPv3N6stored12SyncZmqLayer4baseE"></span><span id="_CPPv2N6stored12SyncZmqLayer4baseE"></span><span id="stored::SyncZmqLayer::base"></span><span class="target" id="classstored_1_1_sync_zmq_layer_1a3923724fa5ad232ce75734db9d44eabb"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">ZmqLayer</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored12SyncZmqLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12SyncZmqLayer12SyncZmqLayerEPvPKcbP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored12SyncZmqLayer12SyncZmqLayerEPvPKcbP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored12SyncZmqLayer12SyncZmqLayerEPvPKcbP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::SyncZmqLayer::SyncZmqLayer__voidP.cCP.b.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_sync_zmq_layer_1abf8d1c6a87614376aaa82230ba9e5a56"></span><span class="sig-name descname"><span class="n"><span class="pre">SyncZmqLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">context</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">endpoint</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">listen</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored12SyncZmqLayer12SyncZmqLayerEPvPKcbP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor. </p>
<p>The given <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> is used for a PAIR socket. If <code class="docutils literal notranslate"><span class="pre">listen</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, it binds to the endpoint, otherwise it connects to it.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_synchronizer"><span class="std std-ref">stored::Synchronizer</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored12SyncZmqLayerD0Ev">
<span id="_CPPv3N6stored12SyncZmqLayerD0Ev"></span><span id="_CPPv2N6stored12SyncZmqLayerD0Ev"></span><span id="stored::SyncZmqLayer::~SyncZmqLayer"></span><span class="target" id="classstored_1_1_sync_zmq_layer_1aaefafd43488c43485ee482d85fa2d6f4"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~SyncZmqLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6stored12SyncZmqLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-terminallayer">
<h2>stored::TerminalLayer<a class="headerlink" href="#stored-terminallayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayerE">
<span id="_CPPv3N6stored13TerminalLayerE"></span><span id="_CPPv2N6stored13TerminalLayerE"></span><span id="stored::TerminalLayer"></span><span class="target" id="classstored_1_1_terminal_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TerminalLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored13TerminalLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Extracts and injects Embedded <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">Debugger</span></a> messages in a stream of data, such as a terminal. </p>
<p>The frame’s boundaries are marked with APC and ST C1 control characters. </p>
<p>Subclassed by CaseInverter</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayerUt2_17E">
<span id="_CPPv3N6stored13TerminalLayerUt2_17E"></span><span class="target" id="classstored_1_1_terminal_layer_1ad1f11cba4e93e3d20582ac34d62e678b"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayerUt2_17E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayerUt2_179MaxBufferE">
<span id="_CPPv3N6stored13TerminalLayerUt2_179MaxBufferE"></span><span class="target" id="classstored_1_1_terminal_layer_1ad1f11cba4e93e3d20582ac34d62e678bac2e5fe6228ece37b246ab755b987f59f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MaxBuffer</span></span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayerUt2_179MaxBufferE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer4baseE">
<span id="_CPPv3N6stored13TerminalLayer4baseE"></span><span id="_CPPv2N6stored13TerminalLayer4baseE"></span><span id="stored::TerminalLayer::base"></span><span class="target" id="classstored_1_1_terminal_layer_1afd194e848a7d83c42e50a7254cf8a640"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer22NonDebugDecodeCallbackE">
<span id="_CPPv3N6stored13TerminalLayer22NonDebugDecodeCallbackE"></span><span id="_CPPv2N6stored13TerminalLayer22NonDebugDecodeCallbackE"></span><span class="target" id="classstored_1_1_terminal_layer_1aee864285bbae09176ff729dae9d7b051"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NonDebugDecodeCallback</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer22NonDebugDecodeCallbackE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">SFINAE_IS_FUNCTION</span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer" title="stored::TerminalLayer::TerminalLayer::F"><span class="n"><span class="pre">F</span></span></a>, <a class="reference internal" href="#_CPPv4N6stored13TerminalLayer22NonDebugDecodeCallbackE" title="stored::TerminalLayer::NonDebugDecodeCallback"><span class="n"><span class="pre">NonDebugDecodeCallback</span></span></a>, <span class="kt"><span class="pre">int</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_terminal_layer_1ac6c3e9caf382d8662e20d240e7293b83"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TerminalLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer" title="stored::TerminalLayer::TerminalLayer::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">cb</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0_F18SFINAE_IS_FUNCTION1F22NonDebugDecodeCallbackiEEN6stored13TerminalLayer13TerminalLayerERR1FP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer13TerminalLayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13TerminalLayer13TerminalLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13TerminalLayer13TerminalLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::TerminalLayer::TerminalLayer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_terminal_layer_1a9d49899bffb69f90ad0a25ba1b3b017c"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TerminalLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer13TerminalLayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayerD0Ev">
<span id="_CPPv3N6stored13TerminalLayerD0Ev"></span><span id="_CPPv2N6stored13TerminalLayerD0Ev"></span><span id="stored::TerminalLayer::~TerminalLayer"></span><span class="target" id="classstored_1_1_terminal_layer_1a9c91e6d99a16671d0e78c120288a1bda"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~TerminalLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Destructor. </p>
<p>Ties to the layer above and below are nicely removed. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored13TerminalLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored13TerminalLayer6decodeEPv6size_t"></span><span id="stored::TerminalLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_terminal_layer_1a189c272877b09b93aac1b1ddc96fe58c"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored13TerminalLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13TerminalLayer6encodeEPKv6size_tb"></span><span id="stored::TerminalLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_terminal_layer_1a8e4eb065c098959fb740a9862cf59164"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13TerminalLayer3mtuEv">
<span id="_CPPv3NK6stored13TerminalLayer3mtuEv"></span><span id="_CPPv2NK6stored13TerminalLayer3mtuEv"></span><span id="stored::TerminalLayer::mtuC"></span><span class="target" id="classstored_1_1_terminal_layer_1a0a19f65b341e78a98dca4f13747fb2a7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored13TerminalLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer14nonDebugEncodeEPKv6size_t">
<span id="_CPPv3N6stored13TerminalLayer14nonDebugEncodeEPKv6size_t"></span><span id="_CPPv2N6stored13TerminalLayer14nonDebugEncodeEPKv6size_t"></span><span id="stored::TerminalLayer::nonDebugEncode__voidCP.s"></span><span class="target" id="classstored_1_1_terminal_layer_1a8b862b9092b315c45164d4fcf0dfacc3"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nonDebugEncode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer14nonDebugEncodeEPKv6size_t" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer5resetEv">
<span id="_CPPv3N6stored13TerminalLayer5resetEv"></span><span id="_CPPv2N6stored13TerminalLayer5resetEv"></span><span id="stored::TerminalLayer::reset"></span><span class="target" id="classstored_1_1_terminal_layer_1aa520c45c348439dbf7a56f511bd5ac39"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer3EscE">
<span id="_CPPv3N6stored13TerminalLayer3EscE"></span><span id="_CPPv2N6stored13TerminalLayer3EscE"></span><span id="stored::TerminalLayer::Esc__cC"></span><span class="target" id="classstored_1_1_terminal_layer_1a892633ca69a59684c9a964600c0cc181"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Esc</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\x1b'</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer3EscE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer6EscEndE">
<span id="_CPPv3N6stored13TerminalLayer6EscEndE"></span><span id="_CPPv2N6stored13TerminalLayer6EscEndE"></span><span id="stored::TerminalLayer::EscEnd__cC"></span><span class="target" id="classstored_1_1_terminal_layer_1a16632f9e5395384bc8db6940eb26259f"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EscEnd</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\\'</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer6EscEndE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13TerminalLayer8EscStartE">
<span id="_CPPv3N6stored13TerminalLayer8EscStartE"></span><span id="_CPPv2N6stored13TerminalLayer8EscStartE"></span><span id="stored::TerminalLayer::EscStart__cC"></span><span class="target" id="classstored_1_1_terminal_layer_1a641d9407a8c7517bcbfb3748b86fa43d"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EscStart</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'_'</span></span><a class="headerlink" href="#_CPPv4N6stored13TerminalLayer8EscStartE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-xsimlayer">
<h2>stored::XsimLayer<a class="headerlink" href="#stored-xsimlayer" title="Link to this heading"></a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayerE">
<span id="_CPPv3N6stored9XsimLayerE"></span><span id="_CPPv2N6stored9XsimLayerE"></span><span id="stored::XsimLayer"></span><span class="target" id="classstored_1_1_xsim_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XsimLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored15DoublePipeLayerE" title="stored::DoublePipeLayer"><span class="n"><span class="pre">DoublePipeLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored9XsimLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>XSIM interaction. </p>
<p>It is based on a <a class="reference internal" href="#classstored_1_1_double_pipe_layer"><span class="std std-ref">DoublePipeLayer</span></a>, having two named pipes. In VHDL, normal file read/write can be used to pass data. This class also adds keep alive messages, such that a read from the pipe never blocks (which lets XSIM hang), but gets dummy data.</p>
<p>This keep alive uses a third pipe. XSIM is supposed to forward all data it receives to this third pipe. This way, the C++ side knows how many bytes are in flight, and if XSIM would block on the next one. Based on this counter, keep alive bytes may be injected. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer4baseE">
<span id="_CPPv3N6stored9XsimLayer4baseE"></span><span id="_CPPv2N6stored9XsimLayer4baseE"></span><span id="stored::XsimLayer::base"></span><span class="target" id="classstored_1_1_xsim_layer_1ab0d2a36e51a3fcdd4ccfca31ccf21c67"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored15DoublePipeLayerE" title="stored::DoublePipeLayer"><span class="n"><span class="pre">DoublePipeLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer9XsimLayerEPKcP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored9XsimLayer9XsimLayerEPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored9XsimLayer9XsimLayerEPKcP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::XsimLayer::XsimLayer__cCP.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_xsim_layer_1a3c9d0feb1dd37875b1df78df12475676"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">XsimLayer</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">pipe_prefix</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer9XsimLayerEPKcP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayerD0Ev">
<span id="_CPPv3N6stored9XsimLayerD0Ev"></span><span id="_CPPv2N6stored9XsimLayerD0Ev"></span><span id="stored::XsimLayer::~XsimLayer"></span><span class="target" id="classstored_1_1_xsim_layer_1a7c9e041a70f220c4403197160a5e443d"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~XsimLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored9XsimLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored9XsimLayer6encodeEPKv6size_tb"></span><span id="stored::XsimLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_xsim_layer_1aa8b71db5919ba9ecf21b8bf235892aec"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer9keepAliveEv">
<span id="_CPPv3N6stored9XsimLayer9keepAliveEv"></span><span id="_CPPv2N6stored9XsimLayer9keepAliveEv"></span><span id="stored::XsimLayer::keepAlive"></span><span class="target" id="classstored_1_1_xsim_layer_1a14c150b6548cffcfec4fabc0d48b2985"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keepAlive</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer9keepAliveEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer4recvEl">
<span id="_CPPv3N6stored9XsimLayer4recvEl"></span><span id="_CPPv2N6stored9XsimLayer4recvEl"></span><span id="stored::XsimLayer::recv__l"></span><span class="target" id="classstored_1_1_xsim_layer_1a71ca3aacf2e97721ddd4bbe583a5432e"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive and decode data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>0 on success, otherwise an <code class="docutils literal notranslate"><span class="pre">errno</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer6reopenEv">
<span id="_CPPv3N6stored9XsimLayer6reopenEv"></span><span id="_CPPv2N6stored9XsimLayer6reopenEv"></span><span id="stored::XsimLayer::reopen"></span><span class="target" id="classstored_1_1_xsim_layer_1a3fbdc451561e1412bee7dcdd877a210a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reopen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer6reopenEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer3reqEv">
<span id="_CPPv3N6stored9XsimLayer3reqEv"></span><span id="_CPPv2N6stored9XsimLayer3reqEv"></span><span id="stored::XsimLayer::req"></span><span class="target" id="classstored_1_1_xsim_layer_1a59015ac4d5e9ff8f9247243f3d022aa5"></span><a class="reference internal" href="#_CPPv4N6stored14NamedPipeLayerE" title="stored::NamedPipeLayer"><span class="n"><span class="pre">NamedPipeLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">req</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer3reqEv" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer5resetEv">
<span id="_CPPv3N6stored9XsimLayer5resetEv"></span><span id="_CPPv2N6stored9XsimLayer5resetEv"></span><span id="stored::XsimLayer::reset"></span><span class="target" id="classstored_1_1_xsim_layer_1aa576cebd914bcec094b5a69bab7c0489"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored9XsimLayer9KeepAliveE">
<span id="_CPPv3N6stored9XsimLayer9KeepAliveE"></span><span id="_CPPv2N6stored9XsimLayer9KeepAliveE"></span><span id="stored::XsimLayer::KeepAlive__cC"></span><span class="target" id="classstored_1_1_xsim_layer_1a6b0bc488a2c1662b77a0d86159e94936"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">KeepAlive</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\x16'</span></span><a class="headerlink" href="#_CPPv4N6stored9XsimLayer9KeepAliveE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="abstract-classes">
<h2>Abstract classes<a class="headerlink" href="#abstract-classes" title="Link to this heading"></a></h2>
<section id="stored-arqlayer">
<h3>stored::ArqLayer<a class="headerlink" href="#stored-arqlayer" title="Link to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayerE">
<span id="_CPPv3N6stored8ArqLayerE"></span><span id="_CPPv2N6stored8ArqLayerE"></span><span id="stored::ArqLayer"></span><span class="target" id="classstored_1_1_arq_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ArqLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored8ArqLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A general purpose layer that performs Automatic Repeat Request operations on messages. </p>
<p>This layer does not assume a specific message pattern. For <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a>, use <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">stored::DebugArqLayer</span></a>.</p>
<p>Every message sent has to be acknowledged. There is no window; after sending a message, an ack must be received before continuing. The queue of messages is by default unlimited, but can be set via the constructor. If the limit is hit, the event callback is invoked.</p>
<p>This layer prepends the message with a sequence number byte. The MSb indicates if it is an ack, the 6 LSb are the sequence number. Sequence 0 is special; it resets the connection. It should not be used during normal operation, so the next sequence number after 63 is 1. Message that do not have a payload (so, no <a class="reference internal" href="#classstored_1_1_arq_layer_1aae0973f22504fbff0b98fefec8d53013"><span class="std std-ref">decode()</span></a> has to be invoked upon receival), should set bit 6. This also applies to the reset message.</p>
<p>Retransmits are triggered every time a message is queued for encoding, or when <a class="reference internal" href="#classstored_1_1_arq_layer_1abf63088fb9952dcc6599a023d0491d12"><span class="std std-ref">flush()</span></a> is called. There is no timeout specified.</p>
<p>One may decide to use a <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a> higher in the protocol stack to reduce the amount of data to retransmit when a message is lost (only one segment is retransmitted, not the full message), but this may add the overhead of the sequence number and round-trip time per segment. If the <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a> is used below the <a class="reference internal" href="#classstored_1_1_arq_layer"><span class="std std-ref">ArqLayer</span></a>, normal-case behavior (no packet loss) is most efficient, but the penalty of a retransmit may be higher. It is up to the infrastructure and application requirements what is best.</p>
<p>The layer has no notion of time, or time out for retransmits and acks. The application must call <a class="reference internal" href="#classstored_1_1_arq_layer_1abf63088fb9952dcc6599a023d0491d12"><span class="std std-ref">flush()</span></a> (for the whole stack), or <a class="reference internal" href="#classstored_1_1_arq_layer_1ab1d2c6282a3ecad2e561ddb517421b09"><span class="std std-ref">keepAlive()</span></a> at a regular interval. Every invocation of either function will do a retransmit of the head of the encode queue. If called to often, retransmits may be done before the other party had a change to respond. If called not often enough, retransmits may take long and communication may be slowed down. Either way, it is functionally correct. Determine for you application what is wise to do. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayerUt2_18E">
<span id="_CPPv3N6stored8ArqLayerUt2_18E"></span><span class="target" id="classstored_1_1_arq_layer_1a3c96d8595db718e961da015699ce2334"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayerUt2_18E" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayerUt2_1827RetransmitCallbackThresholdE">
<span id="_CPPv3N6stored8ArqLayerUt2_1827RetransmitCallbackThresholdE"></span><span class="target" id="classstored_1_1_arq_layer_1a3c96d8595db718e961da015699ce2334a39ab31057c8c5eea4f5e0afb1a8fcbc7"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">RetransmitCallbackThreshold</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayerUt2_1827RetransmitCallbackThresholdE" title="Link to this definition"></a><br /></dt>
<dd><p>Number of successive retransmits before the event is emitted. </p>
</dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer4baseE">
<span id="_CPPv3N6stored8ArqLayer4baseE"></span><span id="_CPPv2N6stored8ArqLayer4baseE"></span><span id="stored::ArqLayer::base"></span><span class="target" id="classstored_1_1_arq_layer_1af614b4f50851434d0ffa0dc9f7388f20"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5EventE">
<span id="_CPPv3N6stored8ArqLayer5EventE"></span><span id="_CPPv2N6stored8ArqLayer5EventE"></span><span class="target" id="classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Event</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5EventE" title="Link to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5Event9EventNoneE">
<span id="_CPPv3N6stored8ArqLayer5Event9EventNoneE"></span><span id="_CPPv2N6stored8ArqLayer5Event9EventNoneE"></span><span class="target" id="classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52ad7a25330d281170fe07445ea0b491f05"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventNone</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5Event9EventNoneE" title="Link to this definition"></a><br /></dt>
<dd><p>No event. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5Event14EventReconnectE">
<span id="_CPPv3N6stored8ArqLayer5Event14EventReconnectE"></span><span id="_CPPv2N6stored8ArqLayer5Event14EventReconnectE"></span><span class="target" id="classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52a695faff43603c7debd9ac61f8b607c99"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventReconnect</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5Event14EventReconnectE" title="Link to this definition"></a><br /></dt>
<dd><p>An unexpected reset message has been received. </p>
<p>The reset message remains unanswered, until <a class="reference internal" href="#classstored_1_1_arq_layer_1ab2f83fa2caaab88f9ee29855b3c527a7"><span class="std std-ref">reset()</span></a> is called. The callback function should probably reinitialize the whole stack. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5Event25EventEncodeBufferOverflowE">
<span id="_CPPv3N6stored8ArqLayer5Event25EventEncodeBufferOverflowE"></span><span id="_CPPv2N6stored8ArqLayer5Event25EventEncodeBufferOverflowE"></span><span class="target" id="classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52afec9d8b5d2c8fe338525458da4909a48"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventEncodeBufferOverflow</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5Event25EventEncodeBufferOverflowE" title="Link to this definition"></a><br /></dt>
<dd><p>The maximum buffer capactiy has passed. </p>
<p>The callback may reset the stack to prevent excessive memory usage. Memory allocation will just continue. If no callback function is set (the default), <code class="docutils literal notranslate"><span class="pre">abort()</span></code> is called when this event happens. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5Event15EventRetransmitE">
<span id="_CPPv3N6stored8ArqLayer5Event15EventRetransmitE"></span><span id="_CPPv2N6stored8ArqLayer5Event15EventRetransmitE"></span><span class="target" id="classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52a67b425c96fa51d033359fbea7f1c344a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventRetransmit</span></span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5Event15EventRetransmitE" title="Link to this definition"></a><br /></dt>
<dd><p><a class="reference internal" href="#classstored_1_1_arq_layer_1a3c96d8595db718e961da015699ce2334a39ab31057c8c5eea4f5e0afb1a8fcbc7"><span class="std std-ref">RetransmitCallbackThreshold</span></a> has been reached on the current message. </p>
<p>This is an indicator that the connection has been lost. </p>
</dd></dl>

</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer13EventCallbackE">
<span id="_CPPv3N6stored8ArqLayer13EventCallbackE"></span><span id="_CPPv2N6stored8ArqLayer13EventCallbackE"></span><span class="target" id="classstored_1_1_arq_layer_1ae9935e268008b6883d444eb119f2d2fa"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventCallback</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4N6stored8ArqLayerE" title="stored::ArqLayer"><span class="n"><span class="pre">ArqLayer</span></span></a><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored8ArqLayer5EventE" title="stored::ArqLayer::Event"><span class="n"><span class="pre">Event</span></span></a><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer13EventCallbackE" title="Link to this definition"></a><br /></dt>
<dd><p>Callback type for <a class="reference internal" href="#classstored_1_1_arq_layer_1a021b579df6a03cbf7a7f77098360547d"><span class="std std-ref">setEventCallback(F&amp;&amp;)</span></a>. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer16EventCallbackArgE">
<span id="_CPPv3N6stored8ArqLayer16EventCallbackArgE"></span><span id="_CPPv2N6stored8ArqLayer16EventCallbackArgE"></span><span class="target" id="classstored_1_1_arq_layer_1a158a5d4eacc3500c71e3cd965b7b6a47"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EventCallbackArg</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4N6stored8ArqLayerE" title="stored::ArqLayer"><span class="n"><span class="pre">ArqLayer</span></span></a><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored8ArqLayer5EventE" title="stored::ArqLayer::Event"><span class="n"><span class="pre">Event</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer16EventCallbackArgE" title="Link to this definition"></a><br /></dt>
<dd><p>Callback type for <a class="reference internal" href="#classstored_1_1_arq_layer_1aea5caae38968fc00bd7de90915a154a8"><span class="std std-ref">setEventCallback(EventCallbackArg*,void*)</span></a>. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer8ArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored8ArqLayer8ArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored8ArqLayer8ArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::ArqLayer::ArqLayer__s.ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_arq_layer_1a38bd267c41bd6d7fd9b5231b398ac176"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ArqLayer</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">maxEncodeBuffer</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer8ArqLayerE6size_tP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Ctor. </p>
<p>If <code class="docutils literal notranslate"><span class="pre">maxEncodeBuffer</span></code> is non-zero, it defines the upper limit of the combined length of all queued messages for encoding. If the limit is hit, the <a class="reference internal" href="#classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52afec9d8b5d2c8fe338525458da4909a48"><span class="std std-ref">EventEncodeBufferOverflow</span></a> event is passed to the callback. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayerD0Ev">
<span id="_CPPv3N6stored8ArqLayerD0Ev"></span><span id="_CPPv2N6stored8ArqLayerD0Ev"></span><span id="stored::ArqLayer::~ArqLayer"></span><span class="target" id="classstored_1_1_arq_layer_1afbab2b5061d597434e4e1f6620bb110f"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~ArqLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored8ArqLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored8ArqLayer6decodeEPv6size_t"></span><span id="stored::ArqLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_arq_layer_1aae0973f22504fbff0b98fefec8d53013"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored8ArqLayer11didTransmitEv">
<span id="_CPPv3NK6stored8ArqLayer11didTransmitEv"></span><span id="_CPPv2NK6stored8ArqLayer11didTransmitEv"></span><span id="stored::ArqLayer::didTransmitC"></span><span class="target" id="classstored_1_1_arq_layer_1a72a34dd87ec3fcee83db2a44f7e8a8e5"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">didTransmit</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored8ArqLayer11didTransmitEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if a full message has been transmitted. </p>
<p>This function can be used to determine if this layer transmitted anything. For example, when a response is decoded, this function can be used to check if anything has sent back, or the message was dropped. Or, when <a class="reference internal" href="#classstored_1_1_arq_layer_1abf63088fb9952dcc6599a023d0491d12"><span class="std std-ref">flush()</span></a> is called, this flag can be used to check if anything was actually flushed.</p>
<p>To use the function, first call <a class="reference internal" href="#classstored_1_1_arq_layer_1ad385593c1549539ec000943046860404"><span class="std std-ref">resetDidTransmit()</span></a>, then execute the code you want to check, and then check <a class="reference internal" href="#classstored_1_1_arq_layer_1a72a34dd87ec3fcee83db2a44f7e8a8e5"><span class="std std-ref">didTransmit()</span></a>.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#classstored_1_1_arq_layer_1ad385593c1549539ec000943046860404"><span class="std std-ref">resetDidTransmit()</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored8ArqLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored8ArqLayer6encodeEPKv6size_tb"></span><span id="stored::ArqLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_arq_layer_1a156d3e684ca880a6d5a4e57da36d585e"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5flushEv">
<span id="_CPPv3N6stored8ArqLayer5flushEv"></span><span id="_CPPv2N6stored8ArqLayer5flushEv"></span><span id="stored::ArqLayer::flush"></span><span class="target" id="classstored_1_1_arq_layer_1abf63088fb9952dcc6599a023d0491d12"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flush</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5flushEv" title="Link to this definition"></a><br /></dt>
<dd><p>Flushes all buffered message out of the stack (top-down), if possible. </p>
<p>Any buffered, held back, queued messages are tried to be sent immediately. A flush is always safe; it never destroys data in the stack, it only tries to force it out.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if successful and the stack is empty, or <code class="docutils literal notranslate"><span class="pre">false</span></code> if message are still blocked </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer9keepAliveEv">
<span id="_CPPv3N6stored8ArqLayer9keepAliveEv"></span><span id="_CPPv2N6stored8ArqLayer9keepAliveEv"></span><span id="stored::ArqLayer::keepAlive"></span><span class="target" id="classstored_1_1_arq_layer_1ab1d2c6282a3ecad2e561ddb517421b09"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">keepAlive</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer9keepAliveEv" title="Link to this definition"></a><br /></dt>
<dd><p>Send a keep-alive packet to check the connection. </p>
<p>It actually retransmits the message that is currently processed (waiting for an ack), or sends a dummy message in case the encode queue is empty. Either way, <a class="reference internal" href="#classstored_1_1_arq_layer_1a7fc718f8b8c05aef735e2c861535eabc"><span class="std std-ref">retransmits()</span></a> and the <a class="reference internal" href="#classstored_1_1_arq_layer_1a1d3b18fc5b159e527b087385ac961e52a67b425c96fa51d033359fbea7f1c344a"><span class="std std-ref">EventRetransmit</span></a> can be used afterwards to determine the quality of the link. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored8ArqLayer3mtuEv">
<span id="_CPPv3NK6stored8ArqLayer3mtuEv"></span><span id="_CPPv2NK6stored8ArqLayer3mtuEv"></span><span id="stored::ArqLayer::mtuC"></span><span class="target" id="classstored_1_1_arq_layer_1a1efacad0bccc60d7d202663ce984aab2"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4NK6stored8ArqLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer5resetEv">
<span id="_CPPv3N6stored8ArqLayer5resetEv"></span><span id="_CPPv2N6stored8ArqLayer5resetEv"></span><span id="stored::ArqLayer::reset"></span><span class="target" id="classstored_1_1_arq_layer_1ab2f83fa2caaab88f9ee29855b3c527a7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer16resetDidTransmitEv">
<span id="_CPPv3N6stored8ArqLayer16resetDidTransmitEv"></span><span id="_CPPv2N6stored8ArqLayer16resetDidTransmitEv"></span><span id="stored::ArqLayer::resetDidTransmit"></span><span class="target" id="classstored_1_1_arq_layer_1ad385593c1549539ec000943046860404"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">resetDidTransmit</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer16resetDidTransmitEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the flag for <a class="reference internal" href="#classstored_1_1_arq_layer_1a72a34dd87ec3fcee83db2a44f7e8a8e5"><span class="std std-ref">didTransmit()</span></a>. </p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#classstored_1_1_arq_layer_1a72a34dd87ec3fcee83db2a44f7e8a8e5"><span class="std std-ref">didTransmit()</span></a></p>
</div>
</p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored8ArqLayer11retransmitsEv">
<span id="_CPPv3NK6stored8ArqLayer11retransmitsEv"></span><span id="_CPPv2NK6stored8ArqLayer11retransmitsEv"></span><span id="stored::ArqLayer::retransmitsC"></span><span class="target" id="classstored_1_1_arq_layer_1a7fc718f8b8c05aef735e2c861535eabc"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">retransmits</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored8ArqLayer11retransmitsEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the number of consecutive retransmits of the same message. </p>
<p>Use this function to determine whether the connection is still alive. It is application-defined what the threshold is of too many retransmits. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer16setEventCallbackEP16EventCallbackArgPv">
<span id="_CPPv3N6stored8ArqLayer16setEventCallbackEP16EventCallbackArgPv"></span><span id="_CPPv2N6stored8ArqLayer16setEventCallbackEP16EventCallbackArgPv"></span><span id="stored::ArqLayer::setEventCallback__EventCallbackArgP.voidP"></span><span class="target" id="classstored_1_1_arq_layer_1aea5caae38968fc00bd7de90915a154a8"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setEventCallback</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored8ArqLayer16EventCallbackArgE" title="stored::ArqLayer::EventCallbackArg"><span class="n"><span class="pre">EventCallbackArg</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">cb</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">arg</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer16setEventCallbackEP16EventCallbackArgPv" title="Link to this definition"></a><br /></dt>
<dd><p>Set event callback. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0EN6stored8ArqLayer16setEventCallbackERR1F">
<span id="_CPPv3I0EN6stored8ArqLayer16setEventCallbackERR1F"></span><span id="_CPPv2I0EN6stored8ArqLayer16setEventCallbackERR1F"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classstored_1_1_arq_layer_1a021b579df6a03cbf7a7f77098360547d"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setEventCallback</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN6stored8ArqLayer16setEventCallbackERR1F" title="stored::ArqLayer::setEventCallback::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">cb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN6stored8ArqLayer16setEventCallbackERR1F" title="Link to this definition"></a><br /></dt>
<dd><p>Set event callback. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer13shrink_to_fitEv">
<span id="_CPPv3N6stored8ArqLayer13shrink_to_fitEv"></span><span id="_CPPv2N6stored8ArqLayer13shrink_to_fitEv"></span><span id="stored::ArqLayer::shrink_to_fit"></span><span class="target" id="classstored_1_1_arq_layer_1ad8b06247c0e2efa0f54c8a1addac8e2d"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">shrink_to_fit</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer13shrink_to_fitEv" title="Link to this definition"></a><br /></dt>
<dd><p>Free all unused memory. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored8ArqLayer13waitingForAckEv">
<span id="_CPPv3NK6stored8ArqLayer13waitingForAckEv"></span><span id="_CPPv2NK6stored8ArqLayer13waitingForAckEv"></span><span id="stored::ArqLayer::waitingForAckC"></span><span class="target" id="classstored_1_1_arq_layer_1a57d385c32e28f7684d75567aeca702f4"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">waitingForAck</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored8ArqLayer13waitingForAckEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if this layer is waiting for an ack. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer7AckFlagE">
<span id="_CPPv3N6stored8ArqLayer7AckFlagE"></span><span id="_CPPv2N6stored8ArqLayer7AckFlagE"></span><span id="stored::ArqLayer::AckFlag__uint8_tC"></span><span class="target" id="classstored_1_1_arq_layer_1a4af8faa0449d4c0c048be13a0d250384"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AckFlag</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0x80U</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer7AckFlagE" title="Link to this definition"></a><br /></dt>
<dd><p>Ack flag. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer7NopFlagE">
<span id="_CPPv3N6stored8ArqLayer7NopFlagE"></span><span id="_CPPv2N6stored8ArqLayer7NopFlagE"></span><span id="stored::ArqLayer::NopFlag__uint8_tC"></span><span class="target" id="classstored_1_1_arq_layer_1a335ff281a24fb2aac70b381451589424"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NopFlag</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0x40U</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer7NopFlagE" title="Link to this definition"></a><br /></dt>
<dd><p>Flag to indicate that the payload should be ignored. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6stored8ArqLayer7SeqMaskE">
<span id="_CPPv3N6stored8ArqLayer7SeqMaskE"></span><span id="_CPPv2N6stored8ArqLayer7SeqMaskE"></span><span id="stored::ArqLayer::SeqMask__uint8_tC"></span><span class="target" id="classstored_1_1_arq_layer_1a6d481c24d715ceef8dcc2fd9cd19eab1"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SeqMask</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0x3fU</span></span><a class="headerlink" href="#_CPPv4N6stored8ArqLayer7SeqMaskE" title="Link to this definition"></a><br /></dt>
<dd><p>Mask for sequence number. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-polledfilelayer">
<h3>stored::PolledFileLayer<a class="headerlink" href="#stored-polledfilelayer" title="Link to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15PolledFileLayerE">
<span id="_CPPv3N6stored15PolledFileLayerE"></span><span id="_CPPv2N6stored15PolledFileLayerE"></span><span id="stored::PolledFileLayer"></span><span class="target" id="classstored_1_1_polled_file_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PolledFileLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored11PolledLayerE" title="stored::PolledLayer"><span class="n"><span class="pre">PolledLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored15PolledFileLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A generalized layer that reads from and writes to a file descriptor. </p>
<p>Subclassed by <a class="reference internal" href="#classstored_1_1_double_pipe_layer"><span class="std std-ref">stored::DoublePipeLayer</span></a>, <a class="reference internal" href="#classstored_1_1_file_layer"><span class="std std-ref">stored::FileLayer</span></a>, <a class="reference internal" href="#classstored_1_1_stdio_layer"><span class="std std-ref">stored::StdioLayer</span></a>, stored::ZmqLayer</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15PolledFileLayer4baseE">
<span id="_CPPv3N6stored15PolledFileLayer4baseE"></span><span id="_CPPv2N6stored15PolledFileLayer4baseE"></span><span id="stored::PolledFileLayer::base"></span><span class="target" id="classstored_1_1_polled_file_layer_1ae29e59c1e56bd2122a3f29ce95a1b347"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored11PolledLayerE" title="stored::PolledLayer"><span class="n"><span class="pre">PolledLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored15PolledFileLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15PolledFileLayer7fd_typeE">
<span id="_CPPv3N6stored15PolledFileLayer7fd_typeE"></span><span id="_CPPv2N6stored15PolledFileLayer7fd_typeE"></span><span id="stored::PolledFileLayer::fd_type"></span><span class="target" id="classstored_1_1_polled_file_layer_1aab824e395201946b7cdbf8875ef60570"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd_type</span></span></span><a class="headerlink" href="#_CPPv4N6stored15PolledFileLayer7fd_typeE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored15PolledFileLayerD0Ev">
<span id="_CPPv3N6stored15PolledFileLayerD0Ev"></span><span id="_CPPv2N6stored15PolledFileLayerD0Ev"></span><span id="stored::PolledFileLayer::~PolledFileLayer"></span><span class="target" id="classstored_1_1_polled_file_layer_1a82c170ff06f0b8c4f7f53d423e138e91"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~PolledFileLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored15PolledFileLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored15PolledFileLayer2fdEv">
<span id="_CPPv3NK6stored15PolledFileLayer2fdEv"></span><span id="_CPPv2NK6stored15PolledFileLayer2fdEv"></span><span id="stored::PolledFileLayer::fdC"></span><span class="target" id="classstored_1_1_polled_file_layer_1a194cabba4326353280b5a677afa2c0cc"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored15PolledFileLayer7fd_typeE" title="stored::PolledFileLayer::fd_type"><span class="n"><span class="pre">fd_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fd</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK6stored15PolledFileLayer2fdEv" title="Link to this definition"></a><br /></dt>
<dd><p>The file descriptor you may poll before calling <a class="reference internal" href="#classstored_1_1_polled_layer_1a5543b676964a05c72c40137edeb4af98"><span class="std std-ref">recv()</span></a>. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-polledlayer">
<h3>stored::PolledLayer<a class="headerlink" href="#stored-polledlayer" title="Link to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11PolledLayerE">
<span id="_CPPv3N6stored11PolledLayerE"></span><span id="_CPPv2N6stored11PolledLayerE"></span><span id="stored::PolledLayer"></span><span class="target" id="classstored_1_1_polled_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PolledLayer</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">stored</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><a class="headerlink" href="#_CPPv4N6stored11PolledLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>A generalized layer that needs a call to <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_polled_layer_1a5543b676964a05c72c40137edeb4af98"><span class="std std-ref"><span class="pre">recv()</span></span></a></code> to get decodable data from somewhere else. </p>
<p>This includes files, sockets, etc. <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_polled_layer_1a5543b676964a05c72c40137edeb4af98"><span class="std std-ref"><span class="pre">recv()</span></span></a></code> reads data, and passes the data upstream. </p>
<p>Subclassed by <a class="reference internal" href="#classstored_1_1_fifo_loopback1"><span class="std std-ref">stored::FifoLoopback1&lt; Capacity, impl::defaultMessages(Capacity) &gt;</span></a>, <a class="reference internal" href="#classstored_1_1_fifo_loopback1"><span class="std std-ref">stored::FifoLoopback1&lt; Capacity, Messages &gt;</span></a>, <a class="reference internal" href="#classstored_1_1_polled_file_layer"><span class="std std-ref">stored::PolledFileLayer</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11PolledLayer4baseE">
<span id="_CPPv3N6stored11PolledLayer4baseE"></span><span id="_CPPv2N6stored11PolledLayer4baseE"></span><span id="stored::PolledLayer::base"></span><span class="target" id="classstored_1_1_polled_layer_1af883f8d2ca7b9e4ae070325d795ba4c7"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#_CPPv4N6stored11PolledLayer4baseE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11PolledLayerD0Ev">
<span id="_CPPv3N6stored11PolledLayerD0Ev"></span><span id="_CPPv2N6stored11PolledLayerD0Ev"></span><span id="stored::PolledLayer::~PolledLayer"></span><span class="target" id="classstored_1_1_polled_layer_1a21006ea40e3651fb8ce21e28126b0ec8"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~PolledLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">override</span></span><a class="headerlink" href="#_CPPv4N6stored11PolledLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Dtor. </p>
<p>Make sure to close() the related file descriptor prior to destruction. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored11PolledLayer6isOpenEv">
<span id="_CPPv3NK6stored11PolledLayer6isOpenEv"></span><span id="_CPPv2NK6stored11PolledLayer6isOpenEv"></span><span id="stored::PolledLayer::isOpenC"></span><span class="target" id="classstored_1_1_polled_layer_1aacb0102c2c989781b5f8934f7f193f0f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">isOpen</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored11PolledLayer6isOpenEv" title="Link to this definition"></a><br /></dt>
<dd><p>Checks if the file descriptor is open. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored11PolledLayer9lastErrorEv">
<span id="_CPPv3NK6stored11PolledLayer9lastErrorEv"></span><span id="_CPPv2NK6stored11PolledLayer9lastErrorEv"></span><span id="stored::PolledLayer::lastErrorC"></span><span class="target" id="classstored_1_1_polled_layer_1a5f93b36636abab8f4cacb5f1b4fbcd82"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">lastError</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored11PolledLayer9lastErrorEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the last error of an invoked method of this class. </p>
<p>This is required after construction or <code class="docutils literal notranslate"><a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref"><span class="pre">encode()</span></span></a></code>, for example, where no error return value is possible. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored11PolledLayer4recvEl">
<span id="_CPPv3N6stored11PolledLayer4recvEl"></span><span id="_CPPv2N6stored11PolledLayer4recvEl"></span><span id="stored::PolledLayer::recv__l"></span><span class="target" id="classstored_1_1_polled_layer_1a5543b676964a05c72c40137edeb4af98"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_us</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6stored11PolledLayer4recvEl" title="Link to this definition"></a><br /></dt>
<dd><p>Try to receive and decode data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>0 on success, otherwise an <code class="docutils literal notranslate"><span class="pre">errno</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="stored-protocollayer">
<h3>stored::ProtocolLayer<a class="headerlink" href="#stored-protocollayer" title="Link to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayerE">
<span id="_CPPv3N6stored13ProtocolLayerE"></span><span id="_CPPv2N6stored13ProtocolLayerE"></span><span id="stored::ProtocolLayer"></span><span class="target" id="classstored_1_1_protocol_layer"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ProtocolLayer</span></span></span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayerE" title="Link to this definition"></a><br /></dt>
<dd><p>Protocol layer base class. </p>
<p>A layer is usually part of the protocol stack. Bytes are decoded and forwarded to the layer above this one, and the layer above sends bytes for encoding down. Moreover, <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a> is the inverse of <a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref">encode()</span></a>. It is wise to stick to this concept, even though the interface of this class allows more irregular structures, such that decoding and encoding take a different path through the protocol layers.</p>
<p>The implementation of this class does nothing except forwarding bytes. Override <a class="reference internal" href="#classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"><span class="std std-ref">encode()</span></a> and <a class="reference internal" href="#classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"><span class="std std-ref">decode()</span></a> in a subclass. </p>
<p>Subclassed by stored::Stream&lt; false &gt;, LossyChannel, PrintfPhysical, <a class="reference internal" href="#classstored_1_1_arq_layer"><span class="std std-ref">stored::ArqLayer</span></a>, <a class="reference internal" href="#classstored_1_1_ascii_escape_layer"><span class="std std-ref">stored::AsciiEscapeLayer</span></a>, <a class="reference internal" href="#classstored_1_1_buffer_layer"><span class="std std-ref">stored::BufferLayer</span></a>, <a class="reference internal" href="#classstored_1_1_callback_layer"><span class="std std-ref">stored::CallbackLayer&lt; Up, Down &gt;</span></a>, <a class="reference internal" href="#classstored_1_1_compress_layer"><span class="std std-ref">stored::CompressLayer</span></a>, <a class="reference internal" href="#classstored_1_1_crc16_layer"><span class="std std-ref">stored::Crc16Layer</span></a>, <a class="reference internal" href="#classstored_1_1_crc8_layer"><span class="std std-ref">stored::Crc8Layer</span></a>, <a class="reference internal" href="#classstored_1_1_debug_arq_layer"><span class="std std-ref">stored::DebugArqLayer</span></a>, <a class="reference internal" href="cpp_debugger.html#classstored_1_1_debugger"><span class="std std-ref">stored::Debugger</span></a>, stored::FrameMerger, <a class="reference internal" href="#classstored_1_1_idle_check_layer"><span class="std std-ref">stored::IdleCheckLayer</span></a>, <a class="reference internal" href="#classstored_1_1_polled_layer"><span class="std std-ref">stored::PolledLayer</span></a>, <a class="reference internal" href="#classstored_1_1_print_layer"><span class="std std-ref">stored::PrintLayer</span></a>, <a class="reference internal" href="#classstored_1_1_segmentation_layer"><span class="std std-ref">stored::SegmentationLayer</span></a>, stored::Stream&lt; Compress &gt;, stored::Stream&lt; true &gt;, <a class="reference internal" href="cpp_synchronizer.html#classstored_1_1_sync_connection"><span class="std std-ref">stored::SyncConnection</span></a>, <a class="reference internal" href="#classstored_1_1_terminal_layer"><span class="std std-ref">stored::TerminalLayer</span></a>, stored::XsimLayer::DecodeCallback, stored::impl::Loopback1</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer">
<span id="_CPPv3N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="_CPPv2N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer"></span><span id="stored::ProtocolLayer::ProtocolLayer__ProtocolLayerP.ProtocolLayerP"></span><span class="target" id="classstored_1_1_protocol_layer_1a01e053123817f8f52dc9217590d5f3b9"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ProtocolLayer</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer" title="stored::ProtocolLayer::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span>, <a class="reference internal" href="#_CPPv4N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer" title="stored::ProtocolLayer::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer13ProtocolLayerEP13ProtocolLayerP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Constructor. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>up</strong> – the layer above, which receives our decoded frames </p></li>
<li><p><strong>down</strong> – the layer below, which receives our encoded frames </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayerD0Ev">
<span id="_CPPv3N6stored13ProtocolLayerD0Ev"></span><span id="_CPPv2N6stored13ProtocolLayerD0Ev"></span><span id="stored::ProtocolLayer::~ProtocolLayer"></span><span class="target" id="classstored_1_1_protocol_layer_1a900026e43f2374c28e0cefcb6e002751"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~ProtocolLayer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayerD0Ev" title="Link to this definition"></a><br /></dt>
<dd><p>Destructor. </p>
<p>Ties to the layer above and below are nicely removed. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer6decodeEPv6size_t">
<span id="_CPPv3N6stored13ProtocolLayer6decodeEPv6size_t"></span><span id="_CPPv2N6stored13ProtocolLayer6decodeEPv6size_t"></span><span id="stored::ProtocolLayer::decode__voidP.s"></span><span class="target" id="classstored_1_1_protocol_layer_1a357b029311be09df61e019682a848ab5"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">decode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer6decodeEPv6size_t" title="Link to this definition"></a><br /></dt>
<dd><p>Decode a frame and forward the decoded frame to the upper layer. </p>
<p>The given buffer may be decoded in-place. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13ProtocolLayer4downEv">
<span id="_CPPv3NK6stored13ProtocolLayer4downEv"></span><span id="_CPPv2NK6stored13ProtocolLayer4downEv"></span><span id="stored::ProtocolLayer::downC"></span><span class="target" id="classstored_1_1_protocol_layer_1ac9a6113262899388f922a6d466e9245a"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">down</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored13ProtocolLayer4downEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the layer below this one. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the layer, or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> if there is none. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer6encodeEv">
<span id="_CPPv3N6stored13ProtocolLayer6encodeEv"></span><span id="_CPPv2N6stored13ProtocolLayer6encodeEv"></span><span id="stored::ProtocolLayer::encode"></span><span class="target" id="classstored_1_1_protocol_layer_1a66c24cec6a17c44fac68213d358a5aa8"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer6encodeEv" title="Link to this definition"></a><br /></dt>
<dd><p>Encodes the last part of the current frame. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer6encodeEPKv6size_tb">
<span id="_CPPv3N6stored13ProtocolLayer6encodeEPKv6size_tb"></span><span id="_CPPv2N6stored13ProtocolLayer6encodeEPKv6size_tb"></span><span id="stored::ProtocolLayer::encode__voidCP.s.b"></span><span class="target" id="classstored_1_1_protocol_layer_1ae5dab6177c1448d1ce5ac04a69c9b4e4"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">encode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">last</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer6encodeEPKv6size_tb" title="Link to this definition"></a><br /></dt>
<dd><p>Encode a (partial) frame and forward it to the lower layer. </p>
<p>The given buffer will not be modified. A new buffer is allocated when required. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer5flushEv">
<span id="_CPPv3N6stored13ProtocolLayer5flushEv"></span><span id="_CPPv2N6stored13ProtocolLayer5flushEv"></span><span id="stored::ProtocolLayer::flush"></span><span class="target" id="classstored_1_1_protocol_layer_1a654466d2b7502efdbd5b1b1e95263194"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flush</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer5flushEv" title="Link to this definition"></a><br /></dt>
<dd><p>Flushes all buffered message out of the stack (top-down), if possible. </p>
<p>Any buffered, held back, queued messages are tried to be sent immediately. A flush is always safe; it never destroys data in the stack, it only tries to force it out.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if successful and the stack is empty, or <code class="docutils literal notranslate"><span class="pre">false</span></code> if message are still blocked </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13ProtocolLayer3mtuEv">
<span id="_CPPv3NK6stored13ProtocolLayer3mtuEv"></span><span id="_CPPv2NK6stored13ProtocolLayer3mtuEv"></span><span id="stored::ProtocolLayer::mtuC"></span><span class="target" id="classstored_1_1_protocol_layer_1a88195d7cdb7129ac7bc625ffeb24d449"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mtu</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored13ProtocolLayer3mtuEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the maximum amount of data to be put in one message that is encoded. </p>
<p>If there is a MTU applicable to the physical transport (like a CAN bus), override this method to reflect that value. Layers on top will decrease the MTU when there protocol adds headers, for example.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes, or 0 for infinity </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer5resetEv">
<span id="_CPPv3N6stored13ProtocolLayer5resetEv"></span><span id="_CPPv2N6stored13ProtocolLayer5resetEv"></span><span id="stored::ProtocolLayer::reset"></span><span class="target" id="classstored_1_1_protocol_layer_1a53fe78a7b405b981649112d9c84fe762"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">reset</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer5resetEv" title="Link to this definition"></a><br /></dt>
<dd><p>Reset the stack (top-down), and drop all messages. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer7setDownEP13ProtocolLayer">
<span id="_CPPv3N6stored13ProtocolLayer7setDownEP13ProtocolLayer"></span><span id="_CPPv2N6stored13ProtocolLayer7setDownEP13ProtocolLayer"></span><span id="stored::ProtocolLayer::setDown__ProtocolLayerP"></span><span class="target" id="classstored_1_1_protocol_layer_1a2b2523892617a43cf7421a654bfc3b6c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setDown</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer7setDownEP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Change the layer that receives our encoded frames. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>down</strong> – the layer, which can be <code class="docutils literal notranslate"><span class="pre">nullptr</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer20setPurgeableResponseEb">
<span id="_CPPv3N6stored13ProtocolLayer20setPurgeableResponseEb"></span><span id="_CPPv2N6stored13ProtocolLayer20setPurgeableResponseEb"></span><span id="stored::ProtocolLayer::setPurgeableResponse__b"></span><span class="target" id="classstored_1_1_protocol_layer_1a8e8b913345f11bf3cf3999c305905681"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setPurgeableResponse</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">purgeable</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer20setPurgeableResponseEb" title="Link to this definition"></a><br /></dt>
<dd><p>Flags the current response as purgeable. </p>
<p>This may influence how a response is handled. Especially, in case of retransmits of lost packets, one may decide to either reexecute the command, or to save the first response and resend it when the command was retransmitted. In that sense, a precious response (default) means that every layer should handle the data with case, as it cannot be recovered once it is lost. When the response is flagged purgeeble, the response may be thrown away after the first try to transmit it to the client.</p>
<p>By default, all responses are precious. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer5setUpEP13ProtocolLayer">
<span id="_CPPv3N6stored13ProtocolLayer5setUpEP13ProtocolLayer"></span><span id="_CPPv2N6stored13ProtocolLayer5setUpEP13ProtocolLayer"></span><span id="stored::ProtocolLayer::setUp__ProtocolLayerP"></span><span class="target" id="classstored_1_1_protocol_layer_1a43ca79c4b9503ce51f817ddc7fcd1cb5"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setUp</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer5setUpEP13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Change the layer that receives our decoded frames. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>up</strong> – the layer, which can be <code class="docutils literal notranslate"><span class="pre">nullptr</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer5stackER13ProtocolLayer">
<span id="_CPPv3N6stored13ProtocolLayer5stackER13ProtocolLayer"></span><span id="_CPPv2N6stored13ProtocolLayer5stackER13ProtocolLayer"></span><span id="stored::ProtocolLayer::stack__ProtocolLayerR"></span><span class="target" id="classstored_1_1_protocol_layer_1a3f34a83e488add9a3f459fb8ebed8e34"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stack</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">down</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer5stackER13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Sets the up/down layers of this layer and the given layer, such that this layer is stacked on (or wrapped by) the given one. </p>
<p>If the given layer was not the top of the stack, this layer injects itself between the given layer and its stacked one. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6stored13ProtocolLayer2upEv">
<span id="_CPPv3NK6stored13ProtocolLayer2upEv"></span><span id="_CPPv2NK6stored13ProtocolLayer2upEv"></span><span id="stored::ProtocolLayer::upC"></span><span class="target" id="classstored_1_1_protocol_layer_1ac7cbd80b10e74166c661582027158b40"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">up</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK6stored13ProtocolLayer2upEv" title="Link to this definition"></a><br /></dt>
<dd><p>Returns the layer above this one. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the layer, or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> if there is none. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6stored13ProtocolLayer4wrapER13ProtocolLayer">
<span id="_CPPv3N6stored13ProtocolLayer4wrapER13ProtocolLayer"></span><span id="_CPPv2N6stored13ProtocolLayer4wrapER13ProtocolLayer"></span><span id="stored::ProtocolLayer::wrap__ProtocolLayerR"></span><span class="target" id="classstored_1_1_protocol_layer_1a7d2f0987462196f77ca9067c050db09d"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wrap</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6stored13ProtocolLayerE" title="stored::ProtocolLayer"><span class="n"><span class="pre">ProtocolLayer</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">up</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6stored13ProtocolLayer4wrapER13ProtocolLayer" title="Link to this definition"></a><br /></dt>
<dd><p>Sets the up/down layers of this layer and the given layer, such that this layer wraps the given one. </p>
<p>If the given layer was not the bottom of the stack, this layer injects itself in between the given layer and its wrapper. </p>
</dd></dl>

</div>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cpp_poller.html" class="btn btn-neutral float-left" title="Poller" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cpp_synchronizer.html" class="btn btn-neutral float-right" title="Synchronizer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Jochem Rutgers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>